<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>DeeJay&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="web前端 Java后端">
<meta property="og:type" content="website">
<meta property="og:title" content="DeeJay&#39;s Blog">
<meta property="og:url" content="https://deejay0921.github.io/index.html">
<meta property="og:site_name" content="DeeJay&#39;s Blog">
<meta property="og:description" content="web前端 Java后端">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="DeeJay&#39;s Blog">
<meta name="twitter:description" content="web前端 Java后端">
  
    <link rel="alternate" href="/atom.xml" title="DeeJay&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">DeeJay&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">学习路上的一些笔记整理</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://deejay0921.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-JDBC的简单了解" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/04/25/JDBC的简单了解/" class="article-date">
  <time datetime="2019-04-25T15:37:36.000Z" itemprop="datePublished">2019-04-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/25/JDBC的简单了解/">JDBC的简单了解.md</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h1><blockquote>
<p>Java DataBase Connectivity  java数据库连接</p>
</blockquote>
<p>是一种数据库访问规则规范。</p>
<h2 id="简单使用"><a href="#简单使用" class="headerlink" title="简单使用"></a>简单使用</h2><p>基本步骤：</p>
<ul>
<li>注册driver</li>
<li>建立连接</li>
<li>创建statement对象进行交互</li>
<li>执行sql 获取结果</li>
<li>释放资源</li>
</ul>
<p>代码举例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">package com;</span><br><span class="line"></span><br><span class="line">import java.sql.*;</span><br><span class="line"></span><br><span class="line">public class Main &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Driver driver;</span><br><span class="line">        Connection connection;</span><br><span class="line">        Statement statement;</span><br><span class="line">        ResultSet res;</span><br><span class="line">        try &#123;</span><br><span class="line">            driver = new com.mysql.cj.jdbc.Driver();</span><br><span class="line">            DriverManager.registerDriver(driver);</span><br><span class="line">            connection = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/base1?serverTimezone=GMT&amp;useSSL=false&quot;, &quot;root&quot;, &quot;Admin@123&quot;);</span><br><span class="line">            statement = connection.createStatement();</span><br><span class="line">            String sql = &quot;select * from product&quot;;</span><br><span class="line">            res =  statement.executeQuery(sql);</span><br><span class="line">            while(res.next()) &#123;</span><br><span class="line">                System.out.println(&quot;pname: &quot; + res.getString(&quot;pname&quot;)</span><br><span class="line">                        + &quot;price: &quot; + res.getDouble(&quot;price&quot;));</span><br><span class="line">            &#125;</span><br><span class="line">            res.close();</span><br><span class="line">            statement.close();</span><br><span class="line">            connection.close();</span><br><span class="line">        &#125;catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>maven依赖添加地址：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;8.0.15&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<h3 id="释放资源代码整理"><a href="#释放资源代码整理" class="headerlink" title="释放资源代码整理"></a>释放资源代码整理</h3><p>将释放资源的逻辑可以提出来，写出一个工具类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">package com;</span><br><span class="line"></span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.ResultSet;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line"></span><br><span class="line">public class JDBCUtils &#123;</span><br><span class="line"></span><br><span class="line">    public static void close(ResultSet res, Statement statement, Connection connection) &#123;</span><br><span class="line">        closeRes(res);</span><br><span class="line">        closeStatement(statement);</span><br><span class="line">        closeConnection(connection);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void closeRes(ResultSet res) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            if(res != null) &#123;</span><br><span class="line">                res.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;finally &#123;</span><br><span class="line">            res = null;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void closeStatement(Statement statement) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            if(statement != null) &#123;</span><br><span class="line">                statement.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;finally &#123;</span><br><span class="line">            statement = null;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void closeConnection(Connection connection) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            if(connection != null) &#123;</span><br><span class="line">                connection.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;finally &#123;</span><br><span class="line">            connection = null;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>优化之后，上面的例子就可以写成这样：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">package com;</span><br><span class="line"></span><br><span class="line">import java.sql.*;</span><br><span class="line"></span><br><span class="line">public class Main &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Driver driver;</span><br><span class="line">        Connection connection = null;</span><br><span class="line">        Statement statement = null;</span><br><span class="line">        ResultSet res = null;</span><br><span class="line">        try &#123;</span><br><span class="line">            driver = new com.mysql.cj.jdbc.Driver();</span><br><span class="line">            DriverManager.registerDriver(driver);</span><br><span class="line">            connection = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/base1?serverTimezone=GMT&amp;useSSL=false&quot;, &quot;root&quot;, &quot;Admin@123&quot;);</span><br><span class="line">            statement = connection.createStatement();</span><br><span class="line">            String sql = &quot;select * from product&quot;;</span><br><span class="line">            res =  statement.executeQuery(sql);</span><br><span class="line">            while(res.next()) &#123;</span><br><span class="line">                System.out.println(&quot;pname: &quot; + res.getString(&quot;pname&quot;)</span><br><span class="line">                        + &quot;price: &quot; + res.getDouble(&quot;price&quot;));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;finally &#123;</span><br><span class="line">            JDBCUtils.close(res, statement, connection);// 在finally里去close()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="关于注册driver的优化"><a href="#关于注册driver的优化" class="headerlink" title="关于注册driver的优化"></a>关于注册driver的优化</h3><p>看下源码可以发现其内部有个static代码块:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">static &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">        DriverManager.registerDriver(new Driver()); // 已经注册了一个Driver</span><br><span class="line">    &#125; catch (SQLException var1) &#123;</span><br><span class="line">        throw new RuntimeException(&quot;Can&apos;t register driver!&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>内部已经进行了driver的注册，所以没必要重复注册第二个driver，按照文档中的示例，可以采用<code>Class.forName(&quot;com.mysql.jdbc.Driver&quot;).newInstance()</code>（其实没必要去newInstance()已经有driver,这个操作浪费空间）;</p>
<p>优化过后的代码如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">package com;</span><br><span class="line"></span><br><span class="line">import java.sql.*;</span><br><span class="line"></span><br><span class="line">public class Main &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Driver driver;</span><br><span class="line">        Connection connection = null;</span><br><span class="line">        Statement statement = null;</span><br><span class="line">        ResultSet res = null;</span><br><span class="line">        try &#123;</span><br><span class="line">//            driver = new com.mysql.cj.jdbc.Driver(); // 改用动态加载一个driver类</span><br><span class="line">            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class="line">//            DriverManager.registerDriver(driver); // com.mysql.cj.jdbc.Driver内部已经注册过driver了  没必要重复注册</span><br><span class="line">            connection = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/base1?serverTimezone=GMT&amp;useSSL=false&quot;, &quot;root&quot;, &quot;Admin@123&quot;);</span><br><span class="line">            statement = connection.createStatement();</span><br><span class="line">            String sql = &quot;select * from product&quot;;</span><br><span class="line">            res =  statement.executeQuery(sql);</span><br><span class="line">            while(res.next()) &#123;</span><br><span class="line">                System.out.println(&quot;pname: &quot; + res.getString(&quot;pname&quot;)</span><br><span class="line">                        + &quot;price: &quot; + res.getDouble(&quot;price&quot;));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;finally &#123;</span><br><span class="line">            JDBCUtils.close(res, statement, connection);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>关于Class.forName(className), 在一些应用中，无法事先知道使用者将加载什么类(比如本例中使用jdbc可能是其他数据库)，而必须让使用者指定类名称以加载类，可以使用 Class 的静态 forName() 方法实现动态加载类。详见<a href="https://www.cnblogs.com/sunzn/p/3187868.html" target="_blank" rel="noopener">Class.forName</a></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://deejay0921.github.io/2019/04/25/JDBC的简单了解/" data-id="ck0hpiiko0001l4vx4prlwbka" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-对XML以及Tomcat的简单了解" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/04/22/对XML以及Tomcat的简单了解/" class="article-date">
  <time datetime="2019-04-22T15:33:14.000Z" itemprop="datePublished">2019-04-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/22/对XML以及Tomcat的简单了解/">对XML以及Tomcat的简单了解.md</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="XML"><a href="#XML" class="headerlink" title="XML"></a>XML</h1><p>extensible markup language 可扩展标记语言。</p>
<h2 id="XML的作用"><a href="#XML的作用" class="headerlink" title="XML的作用"></a>XML的作用</h2><ul>
<li>存储数据</li>
<li>作为配置文件</li>
<li>作为数据传输载体</li>
</ul>
<h2 id="定义XML"><a href="#定义XML" class="headerlink" title="定义XML"></a>定义XML</h2><ol>
<li>文档声明： <code>&lt;?xml version=&quot;1.0&quot;?&gt;</code><blockquote>
<p>指定encoding: <code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</code><br>还有standalone(yes/no)属性代表文档是否引用其他文件</p>
</blockquote>
</li>
<li>元素定义</li>
</ol>
<ul>
<li>元素即标签</li>
<li>必须要有一个根元素</li>
<li>可以写空标签，即自闭合标签</li>
<li>标签名可以完全自定义</li>
</ul>
<ol start="3">
<li>属性定义, 定义在元素内部，如<code>&lt;stu id=&quot;111&quot;&gt;&lt;/stu&gt;</code></li>
<li>注释：同html</li>
</ol>
<h2 id="CDATA区"><a href="#CDATA区" class="headerlink" title="CDATA区"></a>CDATA区</h2><p>所有 XML 文档中的文本均会被解析器解析。<br>只有 CDATA 区段（CDATA section）中的文本会被解析器忽略。</p>
<ul>
<li>非法字符<br>严格地讲，在 XML 中仅有字符 “&lt;”和”&amp;” 是非法的。省略号、引号和大于号是合法的，但是把它们替换为实体引用是个好的习惯。</li>
</ul>
<table>
<thead>
<tr>
<th>转义字符</th>
<th>符号</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td><code>&amp;lt;</code></td>
<td>&lt;</td>
<td>小于</td>
</tr>
<tr>
<td><code>&amp;gt;</code></td>
<td>&lt;</td>
<td>大于</td>
</tr>
<tr>
<td><code>&amp;amp;</code></td>
<td>&amp;</td>
<td>和号</td>
</tr>
<tr>
<td><code>&amp;apos;</code></td>
<td>‘</td>
<td>省略号</td>
</tr>
<tr>
<td><code>&amp;quot;</code></td>
<td>“</td>
<td>引号</td>
</tr>
</tbody></table>
<p>术语 CDATA 指的是不应由 XML 解析器进行解析的文本数据（Unparsed Character Data）。</p>
<p>在 XML 元素中，”&lt;” 和 “&amp;” 是非法的。</p>
<p>“&lt;” 会产生错误，因为解析器会把该字符解释为新元素的开始。</p>
<p>“&amp;” 也会产生错误，因为解析器会把该字符解释为字符实体的开始。</p>
<p>某些文本，比如 JavaScript 代码，包含大量 “&lt;” 或 “&amp;” 字符。为了避免错误，可以将脚本代码定义为 CDATA。</p>
<p>CDATA 部分中的所有内容都会被解析器忽略。</p>
<p>CDATA 部分由 “<!--[CDATA[" 开始，由 "]]-->“ 结束：</p>
<h2 id="XML解析"><a href="#XML解析" class="headerlink" title="XML解析"></a>XML解析</h2><p>获取元素里面的字符数据或者属性数据</p>
<p>分为DOM解析和SAX解析：</p>
<p>DOM解析： document object model,把整个xml全部读到内存当中，形成树状结构。整个文档称为document对象，元素为element,属性为attribute，文本为text。</p>
<blockquote>
<p>如果xml过大，会造成内存溢出，但是可以对文档进行增删操作</p>
</blockquote>
<p>SAX解析：Simple API for Xml, 基于事件驱动，读取一行解析一行。</p>
<blockquote>
<p>SAX不会造成内存溢出，但是相应的，也不可以进行增删，只能查询。</p>
</blockquote>
<blockquote>
<p>针对DOM解析和SAX解析的API: jaxp, jdom, dom4j</p>
</blockquote>
<h3 id="dom4j"><a href="#dom4j" class="headerlink" title="dom4j"></a>dom4j</h3><p>现有如下xml:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span><br><span class="line">&lt;stus&gt;</span><br><span class="line">    &lt;stu id=&quot;111&quot;&gt;</span><br><span class="line">        &lt;name&gt;Yang&lt;/name&gt;</span><br><span class="line">        &lt;age&gt;23&lt;/age&gt;</span><br><span class="line">    &lt;/stu&gt;</span><br><span class="line">&lt;/stus&gt;</span><br></pre></td></tr></table></figure>

<p>dom4j的代码使用举例:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">package com;</span><br><span class="line"></span><br><span class="line">import org.dom4j.Document;</span><br><span class="line">import org.dom4j.Element;</span><br><span class="line">import org.dom4j.io.SAXReader;</span><br><span class="line"></span><br><span class="line">import java.io.File;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">public class Main &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        SAXReader saxReader = new SAXReader(); // 1.创建SAX读取对象</span><br><span class="line">        try &#123;</span><br><span class="line">//            指定解析的xml文件，并获取org.dom4j.Document对象</span><br><span class="line">            Document document =  saxReader.read(new File(&quot;src/main/java/com/demo.xml&quot;));</span><br><span class="line">//            获取到org.dom4j.Document的实例对象,就可以使用其方法获取xml的信息</span><br><span class="line">            System.out.println(document.getRootElement());// org.dom4j.tree.DefaultElement@3966ec04 [Element: &lt;stus attributes: []/&gt;]</span><br><span class="line">            Element rootElement = document.getRootElement();</span><br><span class="line">            System.out.println(rootElement.getName()); // 获取到root元素的name stus</span><br><span class="line"></span><br><span class="line">            List&lt;Element&gt; elements = rootElement.elements(); // 返回根元素的所有直接子元素</span><br><span class="line">            System.out.println(elements.size()); // 1</span><br><span class="line">            for (Element element : elements) &#123;</span><br><span class="line">                System.out.println(element.getName()); // stu</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">//            获取节点的信息</span><br><span class="line">//            element()方法支持链式调用</span><br><span class="line">            System.out.println(rootElement.element(&quot;stu&quot;).element(&quot;name&quot;).getText());// Yang</span><br><span class="line">            System.out.println(rootElement.element(&quot;stu&quot;).element(&quot;name&quot;).getStringValue());// Yang</span><br><span class="line">        &#125;catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Xpath"><a href="#Xpath" class="headerlink" title="Xpath"></a>Xpath</h3><p><a href="http://www.w3school.com.cn/xpath/xpath_nodes.asp" target="_blank" rel="noopener">Xpath教程</a></p>
<p>Xpath是xml的路径语言。支持在解析xml的时候，可以快速的定位到某一个层级比较深的元素。</p>
<blockquote>
<p>使用Xpath可以避免上述例子一直链式调用<code>rootElement.element(&quot;stu&quot;).element(&quot;name&quot;)</code>的这种情况。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">package com;</span><br><span class="line"></span><br><span class="line">import org.dom4j.Document;</span><br><span class="line">import org.dom4j.Element;</span><br><span class="line">import org.dom4j.Node;</span><br><span class="line">import org.dom4j.io.SAXReader;</span><br><span class="line"></span><br><span class="line">import java.io.File;</span><br><span class="line"></span><br><span class="line">public class Main &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        SAXReader saxReader = new SAXReader();</span><br><span class="line">        try &#123;</span><br><span class="line">            Document document =  saxReader.read(new File(&quot;src/main/java/com/demo.xml&quot;));</span><br><span class="line">            Element rootElement = document.getRootElement();</span><br><span class="line"></span><br><span class="line">            Node node =  rootElement.selectSingleNode(&quot;//name&quot;);</span><br><span class="line">            System.out.println(node.getText());// Yang</span><br><span class="line">        &#125;catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>值得一提的是：还需要导入额外的依赖:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- https://mvnrepository.com/artifact/jaxen/jaxen --&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;jaxen&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;jaxen&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;1.2.0&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<h3 id="XML的约束"><a href="#XML的约束" class="headerlink" title="XML的约束"></a>XML的约束</h3><p>对于如下xml:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span><br><span class="line">&lt;stus&gt;</span><br><span class="line">    &lt;stu id=&quot;111&quot;&gt;</span><br><span class="line">        &lt;name&gt;Yang&lt;/name&gt;</span><br><span class="line">        &lt;age&gt;23&lt;/age&gt;</span><br><span class="line">    &lt;/stu&gt;</span><br><span class="line">    &lt;stu id=&quot;111&quot;&gt;</span><br><span class="line">        &lt;name&gt;Yang&lt;/name&gt;</span><br><span class="line">        &lt;name&gt;Zhang&lt;/name&gt;</span><br><span class="line">        &lt;name&gt;Wang&lt;/name&gt;</span><br><span class="line">        &lt;age&gt;23&lt;/age&gt;</span><br><span class="line">    &lt;/stu&gt;</span><br><span class="line">&lt;/stus&gt;</span><br></pre></td></tr></table></figure>

<p>如果想规定id唯一不重复或者name属性只能有一个之类的约束的话，可以使用DTD或者schema</p>
<h4 id="DTD"><a href="#DTD" class="headerlink" title="DTD"></a>DTD</h4><p> <a href="http://www.w3school.com.cn/dtd/dtd_intro.asp" target="_blank" rel="noopener">DTD教程</a></p>
<p>对于上述的xml，可以新建一个dtd文件，对其内部所有的元素做约束，<br>语法规则为: <code>&lt;!ELEMENT 元素名 元素类型&gt;</code> <a href="http://www.w3school.com.cn/dtd/dtd_elements.asp" target="_blank" rel="noopener">DTD元素</a><br>对于元素的属性的约束语法规则为: <code>&lt;!ATTLIST 元素名称 属性名称 属性类型 默认值&gt;</code><a href="http://www.w3school.com.cn/dtd/dtd_attributes.asp" target="_blank" rel="noopener">DTD属性</a><br>新建一个stus.dtd,按如下规则规定约束：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!ELEMENT stus (stu)+&gt; // 代表stus标签下只能有stu标签 +代表有1个或者多个stu，相应的还有*(任意多个)？（0个或者1个）</span><br><span class="line">&lt;!ELEMENT stu (name,age)&gt;</span><br><span class="line">&lt;!ELEMENT name (#PCDATA)&gt;</span><br><span class="line">&lt;!ELEMENT age (#PCDATA)&gt; // #PCDATA用于简单元素，即没有子标签的元素 详见</span><br><span class="line">&lt;!ATTLIST stu id ID&gt; // 设置stu标签的id属性的类型为ID即不可重复</span><br></pre></td></tr></table></figure>

<p>关于属性的类型约束: ID表示不可重复，CDATA表示是普通的文本<br>写好约束之后，在xml中引入dtd引入：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE stus SYSTEM &quot;stus.dtd&quot;&gt;</span><br><span class="line">&lt;stus&gt;</span><br><span class="line">    &lt;stu id=&quot;111&quot;&gt;</span><br><span class="line">        &lt;name&gt;Yang&lt;/name&gt;</span><br><span class="line">        &lt;age&gt;23&lt;/age&gt;</span><br><span class="line">    &lt;/stu&gt;</span><br><span class="line">    &lt;stu id=&quot;111&quot;&gt;</span><br><span class="line">        &lt;name&gt;Yang&lt;/name&gt;</span><br><span class="line">        &lt;name&gt;Zhang&lt;/name&gt;</span><br><span class="line">        &lt;name&gt;Wang&lt;/name&gt;</span><br><span class="line">        &lt;age&gt;23&lt;/age&gt;</span><br><span class="line">    &lt;/stu&gt;</span><br><span class="line">&lt;/stus&gt;</span><br></pre></td></tr></table></figure>

<p>引入本地外部dtd的语法具体为：<code>&lt;!DOCTYPE 根元素 SYSTEM &quot;文件名&quot;&gt;</code></p>
<blockquote>
<p>也可以不用新建文件，直接在xml内部直接引用 <code>&lt;!DOCTYPE 根元素 [dtd内容]&gt;</code></p>
</blockquote>
<blockquote>
<p>如果要引入外部网络上的dtd约束的话，语法规则为：<code>&lt;!DOCTYPE 根元素 PUBLIC dtd名称 dtd路径(url)&gt;</code></p>
</blockquote>
<p>引入成功之后可以看到文件中不符合dtd约束的地方都被标红了。</p>
<h4 id="schema"><a href="#schema" class="headerlink" title="schema"></a>schema</h4><p><a href="http://www.w3school.com.cn/schema/index.asp" target="_blank" rel="noopener">schema教程</a></p>
<p>schema其实就是一个xml，使用xml的语法规则，解析起来比较方便，是为了替代DTD，但是schema约束文本内容比DTD的内容还要多，所以目前也没有真正的替代DTD</p>
<p>schema后缀为xsd文件。对于上述xml，新建一个xsd文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;schema xmlns=&quot;http://www.w3.org/2001/XMLSchema&quot;</span><br><span class="line">targetNamespace=&quot;http://www.w3school.com.cn&quot;</span><br><span class="line">xmlns=&quot;http://www.w3school.com.cn&quot;</span><br><span class="line">elementFormDefault=&quot;qualified&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;/schema&gt;</span><br></pre></td></tr></table></figure>

<p>关于头部属性：<a href="http://www.w3school.com.cn/schema/schema_schema.asp" target="_blank" rel="noopener">xmlns,targetNamespace,elementFormDefault</a></p>
<h1 id="Tomcat"><a href="#Tomcat" class="headerlink" title="Tomcat"></a>Tomcat</h1><h2 id="web服务器软件"><a href="#web服务器软件" class="headerlink" title="web服务器软件"></a>web服务器软件</h2><p>web服务器软件就是运行在服务器上的一个应用程序，负责下面的功能：</p>
<ul>
<li>客户端输入指定url进行访问，web服务器接收请求响应消息</li>
<li>处理客户端的请求， 返回资源/信息</li>
</ul>
<h2 id="Tomcat目录结构"><a href="#Tomcat目录结构" class="headerlink" title="Tomcat目录结构"></a>Tomcat目录结构</h2><p>bin: 包含了一些jar和脚本文件，如startup.bat<br>conf: tomcat的配置，server.xml,web.xml<br>lib: tomcat运行所需的jar包<br>logs: 日志文件<br>temp：临时文件<br>webapps：发布到tomcat服务器上的项目<br>work：jsp文件翻译成java文件存放地</p>
<h3 id="发布项目到tomcat"><a href="#发布项目到tomcat" class="headerlink" title="发布项目到tomcat"></a>发布项目到tomcat</h3><blockquote>
<p>需求：如何通过服务器访问到本地的资源stu.xml</p>
<ol>
<li>拷贝文件到webapps</li>
<li>如果文件在webapps/ROOT下的话，重启tomcat，访问<code>localhost:8080/stu.xml</code>即可</li>
<li>如果文件没放在ROOT文件夹下，那么新建一个文件夹xml，将stu.xml放到xml目录下,重启tomcat，访问<code>localhost:8080/xml/stu.xml</code>下即可访问到</li>
</ol>
</blockquote>
<p>上述文件涉及到拷贝文件，如果不想手动拷贝，可以去修改server.xml去配置虚拟路径</p>
<ol>
<li>打开server.xml，找到<host>标签，在其后面追加一个<code>&lt;Context docBase=&quot;D:\JavaDemos\src\com\company&quot; path=&quot;/testPath&quot;&gt;&lt;/Context&gt;</code><blockquote>
<p>docBase属性规定了要访问的文件的目录路径，而path规定了页面url访问时的路由地址</p>
</blockquote>
</host></li>
<li>重启tomcat，访问<code>localhost:8080/testPath/stu2.xml</code>，即可获取到文件</li>
</ol>
<p>配置虚拟路径还有另外一种方式，详见tomcat Defining a context</p>
<ol>
<li>在$CATALINA_BASE/conf/[enginename]/[hostname]/目录下，默认为：[tomcat安装目录]/conf/catalina/localhost，新建一个xml文件，名称定义为person.xml</li>
<li>编辑这个persom.xml，写入<code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</code>之后，加入上述配置虚拟路径<context>的那个元素:<code>&lt;Context docBase=&quot;D:\JavaDemos\src\com\company&quot;&gt;&lt;/Context&gt;</code>,但是注意要去掉Path</context></li>
<li>重启tomcat，访问<code>localhost:8080/person/stu2.xml</code>即可获取到资源</li>
</ol>
<blockquote>
<p>其实一般使用最多的还是第一种手动拷贝，下面2种配置虚拟路径的方式其实过于繁琐了</p>
</blockquote>
<h3 id="idea中配置Tomcat"><a href="#idea中配置Tomcat" class="headerlink" title="idea中配置Tomcat"></a>idea中配置Tomcat</h3><p>安装完tomcat后，</p>
<ol>
<li>配置环境变量<code>CATALINA_BASE</code>: <code>D:\apache-tomcat-8.5.40       //Tomcat安装目录</code></li>
<li>配置环境变量<code>CATALINA_HOME</code>: <code>D:\apache-tomcat-8.5.40       //Tomcat安装目录</code></li>
<li>在ClassPath的变量值中加入：<code>%CATALINA_HOME%\lib\servlet-api.jar;</code></li>
<li>在Path的变量值中加入：<code>%CATALINA_HOME%\bin;%CATALINA_HOME%\lib;</code></li>
<li>在idea中设置edit configuration，新增tomcat server，server页选择本地安装目录，<strong>并且要在deployment页面新增ROOT，否则默认不能访问8080</strong></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://deejay0921.github.io/2019/04/22/对XML以及Tomcat的简单了解/" data-id="ck0hpiild0004l4vxo4509ds4" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Java中的Collections工具类及Comparator和Comparable的区别" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/04/20/Java中的Collections工具类及Comparator和Comparable的区别/" class="article-date">
  <time datetime="2019-04-20T11:22:24.000Z" itemprop="datePublished">2019-04-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/20/Java中的Collections工具类及Comparator和Comparable的区别/">Java中的Collections工具类及Comparator和Comparable的区别.md</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Collections类的常见方法"><a href="#Collections类的常见方法" class="headerlink" title="Collections类的常见方法"></a>Collections类的常见方法</h2><p>为了处理Collection类的实例对象，java提供了Collections工具类来进行操作。该类为工具类，内部都为static方法。来看常见的几种使用：</p>
<h3 id="Collections-sort"><a href="#Collections-sort" class="headerlink" title="Collections.sort()"></a>Collections.sort()</h3><p>对一个有序的List做排序。可以自定义排序规则。<br>来看最基本的一个使用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Collections;</span><br><span class="line"></span><br><span class="line">public class Main &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ArrayList&lt;Integer&gt; arr = new ArrayList&lt;&gt;();</span><br><span class="line">        arr.add(3);</span><br><span class="line">        arr.add(1);</span><br><span class="line">        arr.add(4);</span><br><span class="line">        arr.add(2);</span><br><span class="line"></span><br><span class="line">        System.out.println(arr); // [3, 1, 4, 2]</span><br><span class="line">        Collections.sort(arr);</span><br><span class="line">        System.out.println(arr); // [1, 2, 3, 4]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果不指定排序规则会按照默认排序进行排列。再来看自定义规则的一个例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public class Main &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ArrayList&lt;Integer&gt; arr = new ArrayList&lt;&gt;();</span><br><span class="line">        arr.add(3);</span><br><span class="line">        arr.add(1);</span><br><span class="line">        arr.add(4);</span><br><span class="line">        arr.add(2);</span><br><span class="line"></span><br><span class="line">        System.out.println(arr); // [3, 1, 4, 2]</span><br><span class="line">        Collections.sort(arr, new Comparator&lt;Integer&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public int compare(Integer o1, Integer o2) &#123;</span><br><span class="line">                return o2 - o1;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        System.out.println(arr); // [4, 3, 2, 1]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Comparator是一个接口，实现其内部的compare方法即可按照给定规则排序。</p>
<blockquote>
<p>上述排序例子中new Comparator<integer>() {}是Java的内部匿名类，本身接口是不能直接new的，这个就表示实际上现在new的是这个<strong>接口的实现类</strong>。</integer></p>
</blockquote>
<h3 id="Comparator和Comparable的区别"><a href="#Comparator和Comparable的区别" class="headerlink" title="Comparator和Comparable的区别"></a>Comparator和Comparable的区别</h3><p>上述例子中使用了Comparator，和前者一样，Comparable也是一个接口，二者表示的不同的地方在于：</p>
<ul>
<li>Comparable是排序接口。若一个类实现了Comparable接口，就意味着该类支持排序</li>
<li>Comparator是比较接口，我们如果需要控制某个类的次序，而该类本身不支持排序(即没有实现Comparable接口)，那么我们就可以建立一个“该类的比较器”来进行排序，这个“比较器”只需要实现Comparator接口即可。</li>
</ul>
<p>举个例子来说，我们这次创建一个自定义的可以排序的类。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">package com.DeeJay;</span><br><span class="line"></span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Collections;</span><br><span class="line"></span><br><span class="line">public class Main &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ArrayList&lt;SortDemo&gt; arr = new ArrayList&lt;&gt;();</span><br><span class="line">        arr.add(new SortDemo(3));</span><br><span class="line">        arr.add(new SortDemo(1));</span><br><span class="line">        arr.add(new SortDemo(2));</span><br><span class="line">        arr.add(new SortDemo(4));</span><br><span class="line"></span><br><span class="line">        System.out.println(arr); // [sortDemo_3, sortDemo_1, sortDemo_2, sortDemo_4]</span><br><span class="line"></span><br><span class="line">        Collections.sort(arr);</span><br><span class="line"></span><br><span class="line">        System.out.println(arr); // [sortDemo_1, sortDemo_2, sortDemo_3, sortDemo_4]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">class SortDemo implements Comparable &#123;</span><br><span class="line">    int num;</span><br><span class="line"></span><br><span class="line">    public SortDemo(int num) &#123;</span><br><span class="line">        this.num = num;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public int compareTo(Object o) &#123;</span><br><span class="line">        SortDemo s = (SortDemo) o;</span><br><span class="line">        return this.num - s.num;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;sortDemo_&quot; + this.num;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上述例子中，SortDemo类实现了Comparable接口1，重写了compareTo方法，从而使得SortDemo类的实例对象可以相互比较排序，直接调用<code>Collections.sort()</code>即可按照实现的compareTo方法进行排序，不需要传入额外的比较逻辑。<br>再来看使用Comparator的例子，这次我们的SortDemo类并不支持排序，调用<code>Collections.sort()</code>传入一个实现Comparator的内部匿名类来指定排序规则。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">package com.DeeJay;</span><br><span class="line"></span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Collections;</span><br><span class="line">import java.util.Comparator;</span><br><span class="line"></span><br><span class="line">public class Main &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ArrayList&lt;SortDemo&gt; arr = new ArrayList&lt;&gt;();</span><br><span class="line">        arr.add(new SortDemo(3));</span><br><span class="line">        arr.add(new SortDemo(1));</span><br><span class="line">        arr.add(new SortDemo(2));</span><br><span class="line">        arr.add(new SortDemo(4));</span><br><span class="line"></span><br><span class="line">        System.out.println(arr); // [sortDemo_3, sortDemo_1, sortDemo_2, sortDemo_4]</span><br><span class="line"></span><br><span class="line">        Collections.sort(arr, new Comparator&lt;SortDemo&gt;() &#123;  // 此处为内部匿名类</span><br><span class="line">            @Override</span><br><span class="line">            public int compare(SortDemo o1, SortDemo o2) &#123;</span><br><span class="line">                return o1.num - o2.num;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        System.out.println(arr); // [sortDemo_1, sortDemo_2, sortDemo_3, sortDemo_4]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">class SortDemo&#123;</span><br><span class="line">    int num;</span><br><span class="line"></span><br><span class="line">    public SortDemo(int num) &#123;</span><br><span class="line">        this.num = num;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;sortDemo_&quot; + this.num;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Collections-binarySearch"><a href="#Collections-binarySearch" class="headerlink" title="Collections.binarySearch"></a>Collections.binarySearch</h3><p>返回指定List和key的index。关于这个方法有地方需要注意:</p>
<blockquote>
<p>要进行查找，要<strong>先调用Collections.sort()进行自然顺序排序</strong>，不然返回的结果会有问题<br>要调用Collections.sort()，那<strong>要保证List内部的类型是实现了Comparable接口的</strong>。</p>
</blockquote>
<p>对于Integer这种Java已经实现了Comparable的类是可以不做处理的，但是我们自定义的类要进行实现Comparable。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">package com.DeeJay;</span><br><span class="line"></span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Collections;</span><br><span class="line"></span><br><span class="line">public class Main &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ArrayList&lt;Integer&gt; arr = new ArrayList&lt;&gt;();</span><br><span class="line">        arr.add(3);</span><br><span class="line">        arr.add(1);</span><br><span class="line">        arr.add(2);</span><br><span class="line">        arr.add(4);</span><br><span class="line"></span><br><span class="line">        Collections.sort(arr); // 调用binarySearch之前要先进行sort</span><br><span class="line">        System.out.println(Collections.binarySearch(arr, 3));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Collections-copy-destList-targetList"><a href="#Collections-copy-destList-targetList" class="headerlink" title="Collections.copy(destList, targetList)"></a>Collections.copy(destList, targetList)</h3><p>这个方法需要注意的地方是，目的List的长度要保证不短于要被克隆的targetList</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">package com.DeeJay;</span><br><span class="line"></span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Collections;</span><br><span class="line"></span><br><span class="line">public class Main &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ArrayList&lt;Integer&gt; arr = new ArrayList&lt;&gt;();</span><br><span class="line">        arr.add(3);</span><br><span class="line">        arr.add(1);</span><br><span class="line">        arr.add(2);</span><br><span class="line">        arr.add(4);</span><br><span class="line">        ArrayList&lt;Integer&gt; arr2 = new ArrayList&lt;&gt;();</span><br><span class="line">        arr2.add(null);</span><br><span class="line">        arr2.add(null);</span><br><span class="line">        arr2.add(null);</span><br><span class="line">        arr2.add(null);</span><br><span class="line">        Collections.copy(arr2, arr);</span><br><span class="line">        System.out.println(arr2); // [3, 1, 2, 4]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Collections-fill-Collections-reverse-Collections-shuffle"><a href="#Collections-fill-Collections-reverse-Collections-shuffle" class="headerlink" title="Collections.fill() Collections.reverse() Collections.shuffle()"></a>Collections.fill() Collections.reverse() Collections.shuffle()</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">package com.DeeJay;</span><br><span class="line"></span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Collections;</span><br><span class="line"></span><br><span class="line">public class Main &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ArrayList&lt;Integer&gt; arr = new ArrayList&lt;&gt;();</span><br><span class="line">        arr.add(3);</span><br><span class="line">        arr.add(1);</span><br><span class="line">        arr.add(2);</span><br><span class="line">        arr.add(4);</span><br><span class="line">        Collections.sort(arr);</span><br><span class="line">        System.out.println(arr);// [1, 2, 3, 4]</span><br><span class="line">        Collections.reverse(arr);</span><br><span class="line">        System.out.println(arr); // [4, 3, 2, 1]</span><br><span class="line">        Collections.shuffle(arr);</span><br><span class="line">        System.out.println(arr); // [1, 3, 2, 4] 随机打乱次序</span><br><span class="line">        Collections.fill(arr, null);</span><br><span class="line">        System.out.println(arr); // [null, null, null, null]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="https://deejay0921.github.io/2019/04/20/Java中的Collections工具类及Comparator和Comparable的区别/" data-id="ck0hpiiki0000l4vxkg07mv3l" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-sql多表查询" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/04/20/sql多表查询/" class="article-date">
  <time datetime="2019-04-20T11:22:24.000Z" itemprop="datePublished">2019-04-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/20/sql多表查询/">sql多表查询.md</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="sql会创建多表以及多表的关系"><a href="#sql会创建多表以及多表的关系" class="headerlink" title="sql会创建多表以及多表的关系"></a>sql会创建多表以及多表的关系</h1><h2 id="需求："><a href="#需求：" class="headerlink" title="需求："></a>需求：</h2><p><a href="https://www.jianshu.com/p/3f3315a453d7" target="_blank" rel="noopener">上篇文章</a>中的商品表和分类表之间存在着所属关系，在数据库如何表示这种关系</p>
<h2 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h2><h3 id="多表之间的关系如何来维护"><a href="#多表之间的关系如何来维护" class="headerlink" title="多表之间的关系如何来维护"></a>多表之间的关系如何来维护</h3><ul>
<li>外键约束：假设现在在product表中插入一条cno为99的数据，但是cno为99的列在category中并不存在。这时候就需要<strong>外键约束</strong>，<code>foreign key</code><ul>
<li>给product这个表中的cno添加一个外键约束: <code>alter table product add foreign key(cno) references category(cid);</code> 添加外键约束之后，再向product中插入category中没有的种类会失败。<blockquote>
<p>添加外键约束之后，如果想删除category中的某一列，也会报错，因为product中有记录在引用。首先得去product表中删除引用该种类的所有记录，才能去删除category中的相应列。</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<p>在下面的例子中，有如下2张表：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from product;</span><br><span class="line">+-----+--------------+-------+---------------------+------+</span><br><span class="line">| pid | pname        | price | pdate               | cno  |</span><br><span class="line">+-----+--------------+-------+---------------------+------+</span><br><span class="line">|   4 | 小米mix2s    |  2700 | 2019-04-14 13:14:31 |    1 |</span><br><span class="line">|   5 | 华为p30      |  4788 | 2019-04-14 13:14:32 |    1 |</span><br><span class="line">|   6 | 阿迪王       |    99 | 2019-04-14 13:14:32 |    2 |</span><br><span class="line">|   7 | 老村长       |    88 | 2019-04-14 13:14:32 |    3 |</span><br><span class="line">|   8 | 劲酒         |    35 | 2019-04-14 13:14:32 |    3 |</span><br><span class="line">|   9 | 小熊饼干     |     3 | 2019-04-14 13:14:32 |    4 |</span><br><span class="line">|  10 | 卫龙辣条     |     1 | 2019-04-14 13:14:32 |    5 |</span><br><span class="line">|  11 | 旺旺雪饼     |     1 | 2019-04-14 13:14:32 |    5 |</span><br><span class="line">+-----+--------------+-------+---------------------+------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from category;</span><br><span class="line">+-----+--------------+-----------------------+</span><br><span class="line">| cid | cname        | cdesc                 |</span><br><span class="line">+-----+--------------+-----------------------+</span><br><span class="line">|   1 | 手机数码     | 电子产品              |</span><br><span class="line">|   2 | 鞋靴箱包     | 江南皮鞋厂打造        |</span><br><span class="line">|   3 | 香烟酒水     | 芙蓉王，茅台          |</span><br><span class="line">|   4 | 酸奶饼干     | 哇哈哈                |</span><br><span class="line">|   5 | 馋嘴零食     | 瓜子花生              |</span><br><span class="line">+-----+--------------+-----------------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>其中2张表存在CONSTRAINT <code>product_ibfk_1</code> FOREIGN KEY (<code>cno</code>) REFERENCES <code>category</code> (<code>cid</code>)外键约束</p>
<h3 id="建立数据库的原则"><a href="#建立数据库的原则" class="headerlink" title="建立数据库的原则"></a>建立数据库的原则</h3><p>通常情况下，一个应用一个数据库。</p>
<h3 id="多表之间的建表原则"><a href="#多表之间的建表原则" class="headerlink" title="多表之间的建表原则"></a>多表之间的建表原则</h3><h4 id="一对多"><a href="#一对多" class="headerlink" title="一对多"></a>一对多</h4><p>例子中提到的product和category就是一对多的关系，一个种类对应多个商品</p>
<ul>
<li>建表原则： 在<strong>多的一方(product)添加一个外键(cno)指向一的一方(category)的主键(cid)</strong><h4 id="多对多"><a href="#多对多" class="headerlink" title="多对多"></a>多对多</h4>例如：老师和学生，学生和课程等<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from student;</span><br><span class="line">+----+--------+--------+-----+</span><br><span class="line">| id | name   | gender | age |</span><br><span class="line">+----+--------+--------+-----+</span><br><span class="line">|  1 | 张三   | 男     |  18 |</span><br><span class="line">|  2 | 李四   | 男     |  20 |</span><br><span class="line">|  3 | 王五   | 女     |  19 |</span><br><span class="line">+----+--------+--------+-----+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from subject;</span><br><span class="line">+----+--------+-----------+</span><br><span class="line">| id | name   | teacher   |</span><br><span class="line">+----+--------+-----------+</span><br><span class="line">|  1 | 英语   | 张老师    |</span><br><span class="line">|  2 | 语文   | 李老师    |</span><br><span class="line">|  3 | 数学   | 杨老师    |</span><br><span class="line">+----+--------+-----------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>假设现在学生开始选课，选课结果如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">张三： 英语，语文</span><br><span class="line">李四： 数学</span><br><span class="line">王五： 英语，语文</span><br></pre></td></tr></table></figure>

<p>student表中的学生选了不固定的subject表里的科目，这种关系为多对多<br>这时候我们就需要建立如下表:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE `stu-submiddletable` (</span><br><span class="line">  `stu-subId` int(11) NOT NULL AUTO_INCREMENT COMMENT &apos;中间表主键&apos;,</span><br><span class="line">  `subjectId` int(11) DEFAULT NULL COMMENT &apos;外键&apos;,</span><br><span class="line">  `studentId` int(11) NOT NULL COMMENT &apos;外键&apos;,</span><br><span class="line">  PRIMARY KEY (`stu-subId`),</span><br><span class="line">  KEY `studentId` (`studentId`),</span><br><span class="line">  KEY `subjectId` (`subjectId`),</span><br><span class="line">  CONSTRAINT `studentId` FOREIGN KEY (`studentId`) REFERENCES `student` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,</span><br><span class="line">  CONSTRAINT `subjectId` FOREIGN KEY (`subjectId`) REFERENCES `subject` (`id`) ON DELETE CASCADE ON UPDATE CASCADE</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8;</span><br></pre></td></tr></table></figure>

<ul>
<li>建表原则： 需要多建一张中间表，将多对多的关系拆为一对多的关系，中间表<strong>至少要有2个外键</strong>，这2个外键分别指向原来的那张表。<br>在上述中间表中，至少需要2个外键，即学生的id和科目的id，其中对于中间表的学生id来说，student表中和中间表的学生id为一对多(即category和product的关系，student为一，中间表学生id为多)，而对于中间表中课程编号，跟subject，也是一样的(subject的id对中间表的科目编号也为一对多)。<br>在这张中间表中，对于上述选择结果，就可以这么存储：<br><img src="https://upload-images.jianshu.io/upload_images/7113407-dba751f62f36155f.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="中间表存储实例"></li>
</ul>
<h4 id="一对一"><a href="#一对一" class="headerlink" title="一对一"></a>一对一</h4><p>例如公民和身份证的关系：<br>People表： id name income<br>IDcard表：sid 头像 性别</p>
<ul>
<li>可以直接合并2张表</li>
<li>可以在一张表中新增列，作为外键，当初一对多的情况来处理，这个外键指向另外一张表。</li>
<li>将2张表的主键建立起连接，让2张表主键相等。</li>
</ul>
<blockquote>
<p>实际用途不多，比如说拆表操作(将表中的一些列拆分出来)</p>
</blockquote>
<blockquote>
<p>关于主键约束和唯一约束的区别：<br>主键约束：默认不能为空且唯一，并且不能有多个主键<br>唯一约束：默认为空且唯一，可以有多个唯一约束键<br>外键都是指向另一张表的<strong>主键</strong>,而唯一的约束不可以作为其他表的外键</p>
</blockquote>
<h3 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h3><p>对于上述的product表和category表来进行下面的举例：</p>
<h4 id="多表查询的几种类型："><a href="#多表查询的几种类型：" class="headerlink" title="多表查询的几种类型："></a>多表查询的几种类型：</h4><ul>
<li>交叉连接查询 笛卡尔积<br>对于上述的product表以及category表，如果想要一次查询2张表的内容，我们可以输入：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from product,category;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * from product,category;</span><br><span class="line">+-----+--------------+-------+---------------------+------+-----+--------------+-----------------------+</span><br><span class="line">| pid | pname        | price | pdate               | cno  | cid | cname        | cdesc                 |</span><br><span class="line">+-----+--------------+-------+---------------------+------+-----+--------------+-----------------------+</span><br><span class="line">|   4 | 小米mix2s    |  2700 | 2019-04-14 13:14:31 |    1 |   1 | 手机数码     | 电子产品              |</span><br><span class="line">|   4 | 小米mix2s    |  2700 | 2019-04-14 13:14:31 |    1 |   2 | 鞋靴箱包     | 江南皮鞋厂打造        |</span><br><span class="line">|   4 | 小米mix2s    |  2700 | 2019-04-14 13:14:31 |    1 |   3 | 香烟酒水     | 芙蓉王，茅台          |</span><br><span class="line">|   4 | 小米mix2s    |  2700 | 2019-04-14 13:14:31 |    1 |   4 | 酸奶饼干     | 哇哈哈                |</span><br><span class="line">|   4 | 小米mix2s    |  2700 | 2019-04-14 13:14:31 |    1 |   5 | 馋嘴零食     | 瓜子花生              |</span><br><span class="line">|   5 | 华为p30      |  4788 | 2019-04-14 13:14:32 |    1 |   1 | 手机数码     | 电子产品              |</span><br><span class="line">|   5 | 华为p30      |  4788 | 2019-04-14 13:14:32 |    1 |   2 | 鞋靴箱包     | 江南皮鞋厂打造        |</span><br><span class="line">|   5 | 华为p30      |  4788 | 2019-04-14 13:14:32 |    1 |   3 | 香烟酒水     | 芙蓉王，茅台          |</span><br><span class="line">|   5 | 华为p30      |  4788 | 2019-04-14 13:14:32 |    1 |   4 | 酸奶饼干     | 哇哈哈                |</span><br><span class="line">|   5 | 华为p30      |  4788 | 2019-04-14 13:14:32 |    1 |   5 | 馋嘴零食     | 瓜子花生              |</span><br><span class="line">|   6 | 阿迪王       |    99 | 2019-04-14 13:14:32 |    2 |   1 | 手机数码     | 电子产品              |</span><br><span class="line">|   6 | 阿迪王       |    99 | 2019-04-14 13:14:32 |    2 |   2 | 鞋靴箱包     | 江南皮鞋厂打造        |</span><br><span class="line">|   6 | 阿迪王       |    99 | 2019-04-14 13:14:32 |    2 |   3 | 香烟酒水     | 芙蓉王，茅台          |</span><br><span class="line">|   6 | 阿迪王       |    99 | 2019-04-14 13:14:32 |    2 |   4 | 酸奶饼干     | 哇哈哈                |</span><br><span class="line">|   6 | 阿迪王       |    99 | 2019-04-14 13:14:32 |    2 |   5 | 馋嘴零食     | 瓜子花生              |</span><br><span class="line">|   7 | 老村长       |    88 | 2019-04-14 13:14:32 |    3 |   1 | 手机数码     | 电子产品              |</span><br><span class="line">|   7 | 老村长       |    88 | 2019-04-14 13:14:32 |    3 |   2 | 鞋靴箱包     | 江南皮鞋厂打造        |</span><br><span class="line">|   7 | 老村长       |    88 | 2019-04-14 13:14:32 |    3 |   3 | 香烟酒水     | 芙蓉王，茅台          |</span><br><span class="line">|   7 | 老村长       |    88 | 2019-04-14 13:14:32 |    3 |   4 | 酸奶饼干     | 哇哈哈                |</span><br><span class="line">|   7 | 老村长       |    88 | 2019-04-14 13:14:32 |    3 |   5 | 馋嘴零食     | 瓜子花生              |</span><br><span class="line">|   8 | 劲酒         |    35 | 2019-04-14 13:14:32 |    3 |   1 | 手机数码     | 电子产品              |</span><br><span class="line">|   8 | 劲酒         |    35 | 2019-04-14 13:14:32 |    3 |   2 | 鞋靴箱包     | 江南皮鞋厂打造        |</span><br><span class="line">|   8 | 劲酒         |    35 | 2019-04-14 13:14:32 |    3 |   3 | 香烟酒水     | 芙蓉王，茅台          |</span><br><span class="line">|   8 | 劲酒         |    35 | 2019-04-14 13:14:32 |    3 |   4 | 酸奶饼干     | 哇哈哈                |</span><br><span class="line">|   8 | 劲酒         |    35 | 2019-04-14 13:14:32 |    3 |   5 | 馋嘴零食     | 瓜子花生              |</span><br><span class="line">|   9 | 小熊饼干     |     3 | 2019-04-14 13:14:32 |    4 |   1 | 手机数码     | 电子产品              |</span><br><span class="line">|   9 | 小熊饼干     |     3 | 2019-04-14 13:14:32 |    4 |   2 | 鞋靴箱包     | 江南皮鞋厂打造        |</span><br><span class="line">|   9 | 小熊饼干     |     3 | 2019-04-14 13:14:32 |    4 |   3 | 香烟酒水     | 芙蓉王，茅台          |</span><br><span class="line">|   9 | 小熊饼干     |     3 | 2019-04-14 13:14:32 |    4 |   4 | 酸奶饼干     | 哇哈哈                |</span><br><span class="line">|   9 | 小熊饼干     |     3 | 2019-04-14 13:14:32 |    4 |   5 | 馋嘴零食     | 瓜子花生              |</span><br><span class="line">|  10 | 卫龙辣条     |     1 | 2019-04-14 13:14:32 |    5 |   1 | 手机数码     | 电子产品              |</span><br><span class="line">|  10 | 卫龙辣条     |     1 | 2019-04-14 13:14:32 |    5 |   2 | 鞋靴箱包     | 江南皮鞋厂打造        |</span><br><span class="line">|  10 | 卫龙辣条     |     1 | 2019-04-14 13:14:32 |    5 |   3 | 香烟酒水     | 芙蓉王，茅台          |</span><br><span class="line">|  10 | 卫龙辣条     |     1 | 2019-04-14 13:14:32 |    5 |   4 | 酸奶饼干     | 哇哈哈                |</span><br><span class="line">|  10 | 卫龙辣条     |     1 | 2019-04-14 13:14:32 |    5 |   5 | 馋嘴零食     | 瓜子花生              |</span><br><span class="line">|  11 | 旺旺雪饼     |     1 | 2019-04-14 13:14:32 |    5 |   1 | 手机数码     | 电子产品              |</span><br><span class="line">|  11 | 旺旺雪饼     |     1 | 2019-04-14 13:14:32 |    5 |   2 | 鞋靴箱包     | 江南皮鞋厂打造        |</span><br><span class="line">|  11 | 旺旺雪饼     |     1 | 2019-04-14 13:14:32 |    5 |   3 | 香烟酒水     | 芙蓉王，茅台          |</span><br><span class="line">|  11 | 旺旺雪饼     |     1 | 2019-04-14 13:14:32 |    5 |   4 | 酸奶饼干     | 哇哈哈                |</span><br><span class="line">|  11 | 旺旺雪饼     |     1 | 2019-04-14 13:14:32 |    5 |   5 | 馋嘴零食     | 瓜子花生              |</span><br><span class="line">+-----+--------------+-------+---------------------+------+-----+--------------+-----------------------+</span><br><span class="line">40 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>上述例子中查出来的结果称为笛卡尔积即2张表的乘积，没什么实际意义。其实我们需要的就是cno等于cid的那些数据，所以需要做一下过滤。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from  product,category where cno=cid;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>对于上述查询，经常会发现cno和cid属于哪个表不明确，可以通过起个别名的方式来指明是哪个表: <code>select * from product as P,category as C where p.cno=c.cid;</code></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from product as P,category as C where p.cno=c.cid;</span><br><span class="line">+-----+--------------+-------+---------------------+------+-----+--------------+-----------------------+</span><br><span class="line">| pid | pname        | price | pdate               | cno  | cid | cname        | cdesc                 |</span><br><span class="line">+-----+--------------+-------+---------------------+------+-----+--------------+-----------------------+</span><br><span class="line">|   4 | 小米mix2s    |  2700 | 2019-04-14 13:14:31 |    1 |   1 | 手机数码     | 电子产品              |</span><br><span class="line">|   5 | 华为p30      |  4788 | 2019-04-14 13:14:32 |    1 |   1 | 手机数码     | 电子产品              |</span><br><span class="line">|   6 | 阿迪王       |    99 | 2019-04-14 13:14:32 |    2 |   2 | 鞋靴箱包     | 江南皮鞋厂打造        |</span><br><span class="line">|   7 | 老村长       |    88 | 2019-04-14 13:14:32 |    3 |   3 | 香烟酒水     | 芙蓉王，茅台          |</span><br><span class="line">|   8 | 劲酒         |    35 | 2019-04-14 13:14:32 |    3 |   3 | 香烟酒水     | 芙蓉王，茅台          |</span><br><span class="line">|   9 | 小熊饼干     |     3 | 2019-04-14 13:14:32 |    4 |   4 | 酸奶饼干     | 哇哈哈                |</span><br><span class="line">|  10 | 卫龙辣条     |     1 | 2019-04-14 13:14:32 |    5 |   5 | 馋嘴零食     | 瓜子花生              |</span><br><span class="line">|  11 | 旺旺雪饼     |     1 | 2019-04-14 13:14:32 |    5 |   5 | 馋嘴零食     | 瓜子花生              |</span><br><span class="line">+-----+--------------+-------+---------------------+------+-----+--------------+-----------------------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>内连接查询<br>对于上述例子，使用where进行条件过滤的为隐式内连接，</p>
<ul>
<li><p>隐式内连接</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from product p,category c where p.cno=c.cid;</span><br></pre></td></tr></table></figure>
</li>
<li><p>显式内链接（使用inner join）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from product p inner join category on p.cno=c.cid;</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from product as P join category as C on p.cno=c.cid;</span><br><span class="line">+-----+--------------+-------+---------------------+------+-----+--------------+-----------------------+</span><br><span class="line">| pid | pname        | price | pdate               | cno  | cid | cname        | cdesc                 |</span><br><span class="line">+-----+--------------+-------+---------------------+------+-----+--------------+-----------------------+</span><br><span class="line">|   4 | 小米mix2s    |  2700 | 2019-04-14 13:14:31 |    1 |   1 | 手机数码     | 电子产品              |</span><br><span class="line">|   5 | 华为p30      |  4788 | 2019-04-14 13:14:32 |    1 |   1 | 手机数码     | 电子产品              |</span><br><span class="line">|   6 | 阿迪王       |    99 | 2019-04-14 13:14:32 |    2 |   2 | 鞋靴箱包     | 江南皮鞋厂打造        |</span><br><span class="line">|   7 | 老村长       |    88 | 2019-04-14 13:14:32 |    3 |   3 | 香烟酒水     | 芙蓉王，茅台          |</span><br><span class="line">|   8 | 劲酒         |    35 | 2019-04-14 13:14:32 |    3 |   3 | 香烟酒水     | 芙蓉王，茅台          |</span><br><span class="line">|   9 | 小熊饼干     |     3 | 2019-04-14 13:14:32 |    4 |   4 | 酸奶饼干     | 哇哈哈                |</span><br><span class="line">|  10 | 卫龙辣条     |     1 | 2019-04-14 13:14:32 |    5 |   5 | 馋嘴零食     | 瓜子花生              |</span><br><span class="line">|  11 | 旺旺雪饼     |     1 | 2019-04-14 13:14:32 |    5 |   5 | 馋嘴零食     | 瓜子花生              |</span><br><span class="line">+-----+--------------+-------+---------------------+------+-----+--------------+-----------------------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>上述2种方式查询出来的结果都是一样的，但是区别在于，隐式内连接是在查询出的结果基础上进行的where条件过滤，但是显式内连接是带着条件去查询结果的，<strong>执行效率是比较高的</strong>。</p>
</blockquote>
<ul>
<li>左外连接（使用 left join）<br>左(外)连接，左表的记录将会全部表示出来，而右表<strong>只会显示符合搜索条件的记录</strong>。右表记录不足的地方均为NULL。<br>对于上述例子，我们先给product表插入一条没有对应cno的数据。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into product values(null, &quot;一条没有cno的记录&quot;, 100, null, null);</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>然后执行左外连接查询：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from product p left join category c on p.cno=c.cid;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from product as P left outer join category as C on p.cno=c.cid;</span><br><span class="line">+-----+--------------------------+-------+---------------------+------+------+--------------+-----------------------+</span><br><span class="line">| pid | pname                    | price | pdate               | cno  | cid  | cname        | cdesc                 |</span><br><span class="line">+-----+--------------------------+-------+---------------------+------+------+--------------+-----------------------+</span><br><span class="line">|   4 | 小米mix2s                |  2700 | 2019-04-14 13:14:31 |    1 |    1 | 手机数码     | 电子产品              |</span><br><span class="line">|   5 | 华为p30                  |  4788 | 2019-04-14 13:14:32 |    1 |    1 | 手机数码     | 电子产品              |</span><br><span class="line">|   6 | 阿迪王                   |    99 | 2019-04-14 13:14:32 |    2 |    2 | 鞋靴箱包     | 江南皮鞋厂打造        |</span><br><span class="line">|   7 | 老村长                   |    88 | 2019-04-14 13:14:32 |    3 |    3 | 香烟酒水     | 芙蓉王，茅台          |</span><br><span class="line">|   8 | 劲酒                     |    35 | 2019-04-14 13:14:32 |    3 |    3 | 香烟酒水     | 芙蓉王，茅台          |</span><br><span class="line">|   9 | 小熊饼干                 |     3 | 2019-04-14 13:14:32 |    4 |    4 | 酸奶饼干     | 哇哈哈                |</span><br><span class="line">|  10 | 卫龙辣条                 |     1 | 2019-04-14 13:14:32 |    5 |    5 | 馋嘴零食     | 瓜子花生              |</span><br><span class="line">|  11 | 旺旺雪饼                 |     1 | 2019-04-14 13:14:32 |    5 |    5 | 馋嘴零食     | 瓜子花生              |</span><br><span class="line">|  13 | 一条没有cno的记录        |   100 | NULL                | NULL | NULL | NULL         | NULL                  |</span><br><span class="line">+-----+--------------------------+-------+---------------------+------+------+--------------+-----------------------+</span><br><span class="line">9 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>可以看到右表的这一条的输出都为null，而左表的数据都输出了。</p>
<ul>
<li>右外连接（使用right join）<br>和左外连接相对的，右外连接查询会将右表的所有数据查询出来，如果左表没有对应数据的话会用null代替</li>
</ul>
<blockquote>
<p>left join和right join分别为left outer join和right outer join的缩写 inner/outer在语句中可以省略</p>
</blockquote>
<blockquote>
<p>简单理解： 内连接查出来的是2个表的交集，左外和右外其实查询了左表或者右表的全部，并且如果有相对应的左表记录的话也会显示。</p>
</blockquote>
<ul>
<li>全连接（使用union /union all）<br>全连接指的是将2个表合并。<br>语句：<br><code>(select colum1,colum2...columN from tableA ) union (select colum1,colum2...columN from tableB );</code><br><code>(select colum1,colum2...columN from tableA ) union all (select colum1,colum2...columN from tableB );</code></li>
</ul>
<blockquote>
<p> 通过union连接的SQL它们分别单独取出的列数必须相同；不要求合并的表列名称相同时，以第一个sql 表列名为准；使用union 时，完全相等的行，将会被合并，由于合并比较耗时，一般不直接使用 union 进行合并，而是通常采用union all 进行合并；</p>
</blockquote>
<blockquote>
<p>被union 连接的sql 子句，单个子句中不用写order by ，因为不会有排序的效果。但可以对最终的结果集进行排序；<br><code>(select id,name from A order by id) union all (select id,name from B order by id); //没有排序效果</code><br><code>(select id,name from A ) union all (select id,name from B ) order by id; //有排序效果</code></p>
</blockquote>
<h4 id="分页查询-使用limit"><a href="#分页查询-使用limit" class="headerlink" title="分页查询(使用limit)"></a>分页查询(使用limit)</h4><p>假设规定pageSize为3</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from product limit 0,3; // 第一页</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from product limit 3,3; // 第二页</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from product limit 6,3; // 第一页</span><br></pre></td></tr></table></figure>

<p>即每次查询根据page和pageSize计算一个起始的索引位置即可：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from product limit (page-1)*pageSize,pageSize;</span><br></pre></td></tr></table></figure>

<h4 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h4><p>即sql语句中再嵌套sql语句</p>
<ol>
<li>如果要查询分类名为“手机数码”的商品，需要动态查询出在category中的cid<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from product where cno=(select cid from category where cname=&quot;手机数码&quot;);</span><br></pre></td></tr></table></figure>

</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * from product as p WHERE p.cno=(SELECT cid from category WHERE cname=&quot;手机数码&quot;);</span><br><span class="line">+-----+-------------+-------+---------------------+------+</span><br><span class="line">| pid | pname       | price | pdate               | cno  |</span><br><span class="line">+-----+-------------+-------+---------------------+------+</span><br><span class="line">|   4 | 小米mix2s   |  2700 | 2019-04-14 13:14:31 |    1 |</span><br><span class="line">|   5 | 华为p30     |  4788 | 2019-04-14 13:14:32 |    1 |</span><br><span class="line">+-----+-------------+-------+---------------------+------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>如果要查询出商品名称(pname)和商品分类名称(cname)的信息<br>选用左右链接查询都可达到目的，在这介绍下子查询的写法：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select pname,(select cname from category as c where p.cno=c.cid) from product as p;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT pname,(SELECT cname from category as C WHERE p.cno=c.cid) from product as P;</span><br><span class="line">+--------------------------+-----------------------------------------------------+</span><br><span class="line">| pname                    | (SELECT cname from category as C WHERE p.cno=c.cid) |</span><br><span class="line">+--------------------------+-----------------------------------------------------+</span><br><span class="line">| 小米mix2s                | 手机数码                                            |</span><br><span class="line">| 华为p30                  | 手机数码                                            |</span><br><span class="line">| 阿迪王                   | 鞋靴箱包                                            |</span><br><span class="line">| 老村长                   | 香烟酒水                                            |</span><br><span class="line">| 劲酒                     | 香烟酒水                                            |</span><br><span class="line">| 小熊饼干                 | 酸奶饼干                                            |</span><br><span class="line">| 卫龙辣条                 | 馋嘴零食                                            |</span><br><span class="line">| 旺旺雪饼                 | 馋嘴零食                                            |</span><br><span class="line">| 一条没有cno的记录        | NULL                                                |</span><br><span class="line">+--------------------------+-----------------------------------------------------+</span><br><span class="line">9 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="https://deejay0921.github.io/2019/04/20/sql多表查询/" data-id="ck0hpiilh0005l4vx50swsct8" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-mysql的简单了解" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/04/14/mysql的简单了解/" class="article-date">
  <time datetime="2019-04-14T06:21:09.000Z" itemprop="datePublished">2019-04-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/14/mysql的简单了解/">mysql的简单了解.md</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="数据库概述"><a href="#数据库概述" class="headerlink" title="数据库概述"></a>数据库概述</h1><ul>
<li>什么是数据库: 数据库就是一个文件系统，只不过需要通过命令(sql)来操作这个文件系统</li>
<li>数据库的作用：存储数据，数据的仓局，带有不同访问权限的人可以有不同的操作</li>
<li>常见的关系型数据库：mysql, oracle, mariadb(mysql分支，和mysql非常相似),db2, sqlserver</li>
<li>常见的非关系型数据库：MongoDB, redis</li>
<li>关系型数据库：主要描述实体与实体的关系</li>
</ul>
<h1 id="mysql的简单使用"><a href="#mysql的简单使用" class="headerlink" title="mysql的简单使用"></a>mysql的简单使用</h1><h3 id="安装和卸载"><a href="#安装和卸载" class="headerlink" title="安装和卸载"></a>安装和卸载</h3><p>安装：<a href="https://blog.csdn.net/huzhongxi/article/details/81988988#%E4%B8%8B%E8%BD%BDzip%E5%AE%89%E8%A3%85%E5%8C%85" target="_blank" rel="noopener">安装教程</a></p>
<p>卸载：卸载mysqlServer，删除mysql目录下所有文件，删除mysql所有存储数据。</p>
<h3 id="mysql的一些语句"><a href="#mysql的一些语句" class="headerlink" title="mysql的一些语句"></a>mysql的一些语句</h3><p>DDL(定义): create drop alter(修改)<br>DML(操作): insert update delete<br>DCL(数据控制语句):  定义访问权限，取消访问权限，安全设置，grant<br>DQL(查询)：select from子句 where子句</p>
<h3 id="常用的数据库crud操作"><a href="#常用的数据库crud操作" class="headerlink" title="常用的数据库crud操作"></a>常用的数据库crud操作</h3><h4 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h4><ul>
<li><p>登录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -proot  //(账号密码为root root)</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建一个数据库DeeJay</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database DeeJay1;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<blockquote>
<p>创建数据库的时候要指定字符集的话可以这么写：<code>create database DeeJay1 character set utf8;</code><br><code>create database DeeJay1 character set utf8 collate 校对规则;</code></p>
<ul>
<li>查看数据库<ul>
<li>查看所有数据库<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show databases;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</blockquote>
<pre><code>输出如下：
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| deejay1            |</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">+--------------------+</span><br><span class="line">5 rows in set (0.02 sec)</span><br></pre></td></tr></table></figure>

可以看到还有一些默认库。
- 查看数据库定义的语句：
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show create database 数据库名;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show create database DeeJay1;</span><br><span class="line">+----------+------------------------------------------------------------------+</span><br><span class="line">| Database | Create Database                                                  |</span><br><span class="line">+----------+------------------------------------------------------------------+</span><br><span class="line">| DeeJay1  | CREATE DATABASE `DeeJay1` /*!40100 DEFAULT CHARACTER SET utf8 */ |</span><br><span class="line">+----------+------------------------------------------------------------------+</span><br><span class="line">1 row in set (0.01 sec)</span><br></pre></td></tr></table></figure></code></pre><ul>
<li><p>修改数据库的操作</p>
<ul>
<li><p>修改数据库的字符集</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter database 数据库名 character set 字符集;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter database DeeJay1 character set gbk;</span><br><span class="line">Query OK, 1 row affected (0.13 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show create database DeeJay1;</span><br><span class="line">+----------+-----------------------------------------------------------------+</span><br><span class="line">| Database | Create Database                                                 |</span><br><span class="line">+----------+-----------------------------------------------------------------+</span><br><span class="line">| DeeJay1  | CREATE DATABASE `DeeJay1` /*!40100 DEFAULT CHARACTER SET gbk */ |</span><br><span class="line">+----------+-----------------------------------------------------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>删除数据库</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop database 数据库名;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; drop database DeeJay1;</span><br><span class="line">Query OK, 0 rows affected (0.19 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show create database DeeJay1;</span><br><span class="line">ERROR 1049 (42000): Unknown database &apos;deejay1&apos;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>其他数据库操作</p>
<ul>
<li><p>切换数据库（选中数据库）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use 数据库名;</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看当前正在使用的数据库</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select database();</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create database base1;</span><br><span class="line">Query OK, 1 row affected (0.15 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select database();</span><br><span class="line">+------------+</span><br><span class="line">| database() |</span><br><span class="line">+------------+</span><br><span class="line">| NULL       |</span><br><span class="line">+------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; use base1;</span><br><span class="line">Database changed</span><br><span class="line">mysql&gt; select database();</span><br><span class="line">+------------+</span><br><span class="line">| database() |</span><br><span class="line">+------------+</span><br><span class="line">| base1      |</span><br><span class="line">+------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h3 id="常用的表的crud操作"><a href="#常用的表的crud操作" class="headerlink" title="常用的表的crud操作"></a>常用的表的crud操作</h3><h4 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table 表名(</span><br><span class="line">    列名 列的类型 约束,</span><br><span class="line">    列名2 列2的类型 约束</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>列的类型(和java做下对比)：</p>
</blockquote>
<table>
<thead>
<tr>
<th>java</th>
<th>sql</th>
</tr>
</thead>
<tbody><tr>
<td>int</td>
<td>int</td>
</tr>
<tr>
<td>char/String</td>
<td>char/varchar</td>
</tr>
<tr>
<td>double</td>
<td>double</td>
</tr>
<tr>
<td>float</td>
<td>float</td>
</tr>
<tr>
<td>boolean</td>
<td>boolean</td>
</tr>
<tr>
<td>date</td>
<td>date(YYYY-MM-DD)/time(hh:mm:ss)/datetime(YYYY-MM-DD hh:mm:ss 默认为null)/timestamp(YYYY-MM-DD hh:mm:ss 默认为当前时间)</td>
</tr>
</tbody></table>
<p><em>char: 固定长度  varchar:可变长度</em><br>数据库中的列类型还有<code>text</code>(主要用来存储文本)和<code>blob</code>(主要用来存放二进制)</p>
<blockquote>
<p>列的约束：<br>主键约束： primary key<br>唯一约束： unique<br>非空约束： not null</p>
</blockquote>
<p>创建表举例：</p>
<ol>
<li>分析实体： 学生</li>
<li>学生ID</li>
<li>姓名</li>
<li>性别</li>
<li>年龄</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table student(studentId int primary key, name varchar(25), gender boolean, age int);</span><br><span class="line">Query OK, 0 rows affected (0.72 sec)</span><br></pre></td></tr></table></figure>

<h4 id="查看表"><a href="#查看表" class="headerlink" title="查看表"></a>查看表</h4><ul>
<li>查看所有的表<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show tables;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show tables;</span><br><span class="line">+-----------------+</span><br><span class="line">| Tables_in_base1 |</span><br><span class="line">+-----------------+</span><br><span class="line">| student         |</span><br><span class="line">+-----------------+</span><br><span class="line">1 row in set (0.07 sec)</span><br></pre></td></tr></table></figure>

<ul>
<li>查看表的定义<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show create table 表名;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show create table student;</span><br><span class="line">+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Table   | Create Table</span><br><span class="line">                                                                                                                   |</span><br><span class="line">+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| student | CREATE TABLE `student` (</span><br><span class="line">  `studentId` int(11) NOT NULL,</span><br><span class="line">  `name` varchar(25) DEFAULT NULL,</span><br><span class="line">  `gender` tinyint(1) DEFAULT NULL,</span><br><span class="line">  `age` int(11) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`studentId`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8 |</span><br><span class="line">+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">1 row in set (0.03 sec)</span><br></pre></td></tr></table></figure>

<ul>
<li>查看表结构<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">desc 表名;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc student;</span><br><span class="line">+-----------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field     | Type        | Null | Key | Default | Extra |</span><br><span class="line">+-----------+-------------+------+-----+---------+-------+</span><br><span class="line">| studentId | int(11)     | NO   | PRI | NULL    |       |</span><br><span class="line">| name      | varchar(25) | YES  |     | NULL    |       |</span><br><span class="line">| gender    | tinyint(1)  | YES  |     | NULL    |       |</span><br><span class="line">| age       | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">+-----------+-------------+------+-----+---------+-------+</span><br><span class="line">4 rows in set (0.04 sec)</span><br></pre></td></tr></table></figure>

<h4 id="修改表"><a href="#修改表" class="headerlink" title="修改表"></a>修改表</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名 修改的类型 列名 列的类型 列的约束;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>修改的类型: 添加列(add), 修改列(modify), 修改列名(change), 删除列(drop), 修改表名(rename)</p>
<ul>
<li>添加列(add)</li>
</ul>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter table student add score int not null; // 给student添加一列成绩，为int型，并且不能为null</span><br><span class="line">Query OK, 0 rows affected (0.23 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; desc student;</span><br><span class="line">+-----------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field     | Type        | Null | Key | Default | Extra |</span><br><span class="line">+-----------+-------------+------+-----+---------+-------+</span><br><span class="line">| studentId | int(11)     | NO   | PRI | NULL    |       |</span><br><span class="line">| name      | varchar(25) | YES  |     | NULL    |       |</span><br><span class="line">| gender    | tinyint(1)  | YES  |     | NULL    |       |</span><br><span class="line">| age       | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">| score     | int(11)     | NO   |     | NULL    |       |</span><br><span class="line">+-----------+-------------+------+-----+---------+-------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>修改列(modify)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter table student modify gender int;// 修改student的gender列的类型为int          </span><br><span class="line">Query OK, 0 rows affected (0.75 sec)                       </span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0                     </span><br><span class="line">                                                           </span><br><span class="line">mysql&gt; desc student;                                       </span><br><span class="line">+-----------+-------------+------+-----+---------+-------+ </span><br><span class="line">| Field     | Type        | Null | Key | Default | Extra | </span><br><span class="line">+-----------+-------------+------+-----+---------+-------+ </span><br><span class="line">| studentId | int(11)     | NO   | PRI | NULL    |       | </span><br><span class="line">| name      | varchar(25) | YES  |     | NULL    |       | </span><br><span class="line">| gender    | int(11)     | YES  |     | NULL    |       | </span><br><span class="line">| age       | int(11)     | YES  |     | NULL    |       | </span><br><span class="line">| score     | int(11)     | NO   |     | NULL    |       | </span><br><span class="line">+-----------+-------------+------+-----+---------+-------+ </span><br><span class="line">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改列名(change)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter table student change name studentname varchar(25);</span><br><span class="line">Query OK, 0 rows affected (0.12 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; desc student;</span><br><span class="line">+-------------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field       | Type        | Null | Key | Default | Extra |</span><br><span class="line">+-------------+-------------+------+-----+---------+-------+</span><br><span class="line">| studentId   | int(11)     | NO   | PRI | NULL    |       |</span><br><span class="line">| studentname | varchar(25) | YES  |     | NULL    |       |</span><br><span class="line">| gender      | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">| age         | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">| score       | int(11)     | NO   |     | NULL    |       |</span><br><span class="line">+-------------+-------------+------+-----+---------+-------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除列(drop)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter table student drop score;</span><br><span class="line">Query OK, 0 rows affected (0.68 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; desc student;</span><br><span class="line">+-------------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field       | Type        | Null | Key | Default | Extra |</span><br><span class="line">+-------------+-------------+------+-----+---------+-------+</span><br><span class="line">| studentId   | int(11)     | NO   | PRI | NULL    |       |</span><br><span class="line">| studentname | varchar(25) | YES  |     | NULL    |       |</span><br><span class="line">| gender      | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">| age         | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">+-------------+-------------+------+-----+---------+-------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改表名(rename), 修改表的字符集<br>这两种方法一般不常用，慎用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename table student to normalstudent;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table student character set gbk;</span><br></pre></td></tr></table></figure>

<h4 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop table 表名;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; drop table student;</span><br><span class="line">Query OK, 0 rows affected (0.24 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show tables;</span><br><span class="line">Empty set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h3 id="sql对表中数据的CRUD操作"><a href="#sql对表中数据的CRUD操作" class="headerlink" title="sql对表中数据的CRUD操作"></a>sql对表中数据的CRUD操作</h3><p>现有如下结构的一个表:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc student;</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field  | Type        | Null | Key | Default | Extra |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| id     | int(11)     | NO   | PRI | NULL    |       |</span><br><span class="line">| name   | varchar(25) | YES  |     | NULL    |       |</span><br><span class="line">| ismale | tinyint(1)  | YES  |     | NULL    |       |</span><br><span class="line">| age    | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h4 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into 表名(列名1,列名2,列名3) values(值1, 值2, 值3);</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into student(id, name, ismale, age) values(1, &quot;zhangsan&quot;, true, 20);</span><br><span class="line">Query OK, 1 row affected (0.08 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from student;</span><br><span class="line">+----+----------+--------+------+</span><br><span class="line">| id | name     | ismale | age  |</span><br><span class="line">+----+----------+--------+------+</span><br><span class="line">|  1 | zhangsan |      1 |   20 |</span><br><span class="line">+----+----------+--------+------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>对于上述的表中所有列都插入数据的情况，可以简写为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into 表名 values(值1, 值2, 值3);</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into student values(2, &quot;lisi&quot;, true, 18);</span><br><span class="line">Query OK, 1 row affected (0.08 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from student;</span><br><span class="line">+----+----------+--------+------+</span><br><span class="line">| id | name     | ismale | age  |</span><br><span class="line">+----+----------+--------+------+</span><br><span class="line">|  1 | zhangsan |      1 |   20 |</span><br><span class="line">|  2 | lisi     |      1 |   18 |</span><br><span class="line">+----+----------+--------+------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>也可以灵活指定想插入的列。</p>
</blockquote>
<p>批量插入：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into 表名 values(值1, 值2, 值3),(值1, 值2, 值3),(值1, 值2, 值3);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>单条插入和批量插入的效率问题： 批量会比较快，但是如果某一条数据有问题的话会都失败。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into student values(3, &quot;Yang&quot;, true, 23),(4, &quot;Wen&quot;, false, 25);</span><br><span class="line">Query OK, 2 rows affected (0.06 sec)</span><br><span class="line">Records: 2  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from student;</span><br><span class="line">+----+----------+--------+------+</span><br><span class="line">| id | name     | ismale | age  |</span><br><span class="line">+----+----------+--------+------+</span><br><span class="line">|  1 | zhangsan |      1 |   20 |</span><br><span class="line">|  2 | lisi     |      1 |   18 |</span><br><span class="line">|  3 | Yang     |      1 |   23 |</span><br><span class="line">|  4 | Wen      |      0 |   25 |</span><br><span class="line">+----+----------+--------+------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h4 id="删除记录"><a href="#删除记录" class="headerlink" title="删除记录"></a>删除记录</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> 表名 [<span class="keyword">where</span> 条件]</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; delete from student where name=&apos;zhangsan&apos;;</span><br><span class="line">Query OK, 1 row affected (0.06 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from student;</span><br><span class="line">+----+------+--------+------+</span><br><span class="line">| id | name | ismale | age  |</span><br><span class="line">+----+------+--------+------+</span><br><span class="line">|  2 | lisi |      1 |   18 |</span><br><span class="line">|  3 | Yang |      1 |   23 |</span><br><span class="line">|  4 | Wen  |      0 |   25 |</span><br><span class="line">+----+------+--------+------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>delete from student;</code>如果没有where条件，执行这个语句的话会将数据一条一条全部删除。</p>
</blockquote>
<blockquote>
<p>delete删除数据和truncate删除数据的区别:delete属于DML,是一条一条删除表中数据, truncate属于DDL，先去删除表再去重建表。<br>如果数据较少那么delete较快，如果数据多，那么truncate较快。 </p>
</blockquote>
<h4 id="修改表记录"><a href="#修改表记录" class="headerlink" title="修改表记录"></a>修改表记录</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> 表名 <span class="keyword">set</span> 列名=列的值,列名<span class="number">2</span>=值<span class="number">2</span> [<span class="keyword">where</span> 条件]</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; update student set name=&quot;zhangsan&quot; where id=2; // 将id为2的那一列的name改为zhangsan</span><br><span class="line">Query OK, 1 row affected (0.06 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from student;</span><br><span class="line">+----+----------+--------+------+</span><br><span class="line">| id | name     | ismale | age  |</span><br><span class="line">+----+----------+--------+------+</span><br><span class="line">|  2 | zhangsan |      1 |   18 |</span><br><span class="line">|  3 | Yang     |      1 |   23 |</span><br><span class="line">|  4 | Wen      |      0 |   25 |</span><br><span class="line">+----+----------+--------+------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>update student set name=&quot;zhangsan&quot;,ismale=false;</code>如果后面不跟where条件，那么表中所有的列的name和ismale列都会改。</p>
</blockquote>
<h4 id="查询记录"><a href="#查询记录" class="headerlink" title="查询记录"></a>查询记录</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select [distinct] [ * ] [列名1,列名2] from 表名 [where 条件];</span><br></pre></td></tr></table></figure>

<blockquote>
<p>distinct: 去除重复的数据</p>
</blockquote>
<p>首先创建一个商品分类的表：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">category</span>(</span><br><span class="line">  cid <span class="built_in">int</span> primary <span class="keyword">key</span> auto_increment,</span><br><span class="line">  cname <span class="built_in">varchar</span>(<span class="number">25</span>),</span><br><span class="line">  cdesc <span class="built_in">varchar</span>(<span class="number">31</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>然后插入数据：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">category</span> <span class="keyword">values</span>(<span class="literal">null</span>, <span class="string">"手机数码"</span>, <span class="string">"电子产品"</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">category</span> <span class="keyword">values</span>(<span class="literal">null</span>, <span class="string">"鞋靴箱包"</span>, <span class="string">"江南皮鞋厂打造"</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">category</span> <span class="keyword">values</span>(<span class="literal">null</span>, <span class="string">"香烟酒水"</span>, <span class="string">"芙蓉王，茅台"</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">category</span> <span class="keyword">values</span>(<span class="literal">null</span>, <span class="string">"酸奶饼干"</span>, <span class="string">"哇哈哈"</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">category</span> <span class="keyword">values</span>(<span class="literal">null</span>, <span class="string">"馋嘴零食"</span>, <span class="string">"瓜子花生"</span>);</span><br></pre></td></tr></table></figure>

<p>现在这个表的结构为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from category;</span><br><span class="line">+-----+--------------+-----------------------+</span><br><span class="line">| cid | cname        | cdesc                 |</span><br><span class="line">+-----+--------------+-----------------------+</span><br><span class="line">|   1 | 手机数码     | 电子产品              |</span><br><span class="line">|   2 | 鞋靴箱包     | 江南皮鞋厂打造        |</span><br><span class="line">|   3 | 香烟酒水     | 芙蓉王，茅台          |</span><br><span class="line">|   4 | 酸奶饼干     | 哇哈哈                |</span><br><span class="line">|   5 | 馋嘴零食     | 瓜子花生              |</span><br><span class="line">+-----+--------------+-----------------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>对于指定列的查询：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select cname,cdesc from category;</span><br><span class="line">+--------------+-----------------------+</span><br><span class="line">| cname        | cdesc                 |</span><br><span class="line">+--------------+-----------------------+</span><br><span class="line">| 手机数码     | 电子产品              |</span><br><span class="line">| 鞋靴箱包     | 江南皮鞋厂打造        |</span><br><span class="line">| 香烟酒水     | 芙蓉王，茅台          |</span><br><span class="line">| 酸奶饼干     | 哇哈哈                |</span><br><span class="line">| 馋嘴零食     | 瓜子花生              |</span><br><span class="line">+--------------+-----------------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>再来创建一张商品的表，商品和商品分类的关系为所属关系:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> product(</span><br><span class="line">  pid <span class="built_in">int</span> primary <span class="keyword">key</span> auto_increment,</span><br><span class="line">  pname <span class="built_in">varchar</span>(<span class="number">25</span>),</span><br><span class="line">  price <span class="keyword">double</span>, // 价格</span><br><span class="line">  pdate <span class="built_in">timestamp</span>, // 生产日期</span><br><span class="line">  cno <span class="built_in">int</span> // 商品分类的<span class="keyword">id</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>插入一些数据：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="literal">null</span>, <span class="string">"小米mix2s"</span>, <span class="number">2700</span>, <span class="keyword">current_timestamp</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="literal">null</span>, <span class="string">"华为p30"</span>, <span class="number">4788</span>, <span class="keyword">current_timestamp</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="literal">null</span>, <span class="string">"阿迪王"</span>, <span class="number">99</span>, <span class="keyword">current_timestamp</span>, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="literal">null</span>, <span class="string">"老村长"</span>, <span class="number">88</span>, <span class="keyword">current_timestamp</span>, <span class="number">3</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="literal">null</span>, <span class="string">"劲酒"</span>, <span class="number">35</span>, <span class="keyword">current_timestamp</span>, <span class="number">3</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="literal">null</span>, <span class="string">"小熊饼干"</span>, <span class="number">3</span>, <span class="keyword">current_timestamp</span>, <span class="number">4</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="literal">null</span>, <span class="string">"卫龙辣条"</span>, <span class="number">1</span>, <span class="keyword">current_timestamp</span>, <span class="number">5</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="literal">null</span>, <span class="string">"旺旺雪饼"</span>, <span class="number">2</span>, <span class="keyword">current_timestamp</span>, <span class="number">5</span>);</span><br></pre></td></tr></table></figure>

<p>当前product表为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from product;</span><br><span class="line">+-----+--------------+-------+---------------------+------+</span><br><span class="line">| pid | pname        | price | pdate               | cno  |</span><br><span class="line">+-----+--------------+-------+---------------------+------+</span><br><span class="line">|   4 | 小米mix2s    |  2700 | 2019-04-14 13:14:31 |    1 |</span><br><span class="line">|   5 | 华为p30      |  4788 | 2019-04-14 13:14:32 |    1 |</span><br><span class="line">|   6 | 阿迪王       |    99 | 2019-04-14 13:14:32 |    2 |</span><br><span class="line">|   7 | 老村长       |    88 | 2019-04-14 13:14:32 |    3 |</span><br><span class="line">|   8 | 劲酒         |    35 | 2019-04-14 13:14:32 |    3 |</span><br><span class="line">|   9 | 小熊饼干     |     3 | 2019-04-14 13:14:32 |    4 |</span><br><span class="line">|  10 | 卫龙辣条     |     1 | 2019-04-14 13:14:32 |    5 |</span><br><span class="line">|  11 | 旺旺雪饼     |     1 | 2019-04-14 13:14:32 |    5 |</span><br><span class="line">+-----+--------------+-------+---------------------+------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>简单查询</p>
<ul>
<li><p>查询所有商品: </p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from product;</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询商品名称和价格</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select pname,price from product;</span><br></pre></td></tr></table></figure>
</li>
<li><p>别名查询. <code>as</code>关键字， as可以省略</p>
<ul>
<li><p>表别名, <code>select p.pname, p.price from product as p</code>（主要用于多表查询）</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> p.pname, p.price <span class="keyword">from</span> product <span class="keyword">as</span> p;</span><br></pre></td></tr></table></figure>
</li>
<li><p>列别名, <code>select pname as 商品名称, price as 商品价格 from product;</code></p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select pname as 商品名称, price as 商品价格 from product;</span><br><span class="line">+--------------+--------------+</span><br><span class="line">| 商品名称     | 商品价格     |</span><br><span class="line">+--------------+--------------+</span><br><span class="line">| 小米mix2s    |         2700 |</span><br><span class="line">| 华为p30      |         4788 |</span><br><span class="line">| 阿迪王       |           99 |</span><br><span class="line">| 老村长       |           88 |</span><br><span class="line">| 劲酒         |           35 |</span><br><span class="line">| 小熊饼干     |            3 |</span><br><span class="line">| 卫龙辣条     |            1 |</span><br><span class="line">| 旺旺雪饼     |            1 |</span><br><span class="line">+--------------+--------------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>  可以看到，输出的列别名已经发生了更改。</p>
</li>
</ul>
</li>
<li><p>去掉重复的值</p>
<ul>
<li><p>查询商品所有的价格:</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select price from product;</span><br><span class="line">+-------+</span><br><span class="line">| price |</span><br><span class="line">+-------+</span><br><span class="line">|  2700 |</span><br><span class="line">|  4788 |</span><br><span class="line">|    99 |</span><br><span class="line">|    88 |</span><br><span class="line">|    35 |</span><br><span class="line">|     3 |</span><br><span class="line">|     1 |</span><br><span class="line">|     1 |</span><br><span class="line">+-------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>  输出的值有些是重复的，那么我们可以引入distinct来去掉重复的值：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select distinct price from product;</span><br><span class="line">+-------+</span><br><span class="line">| price |</span><br><span class="line">+-------+</span><br><span class="line">|  2700 |</span><br><span class="line">|  4788 |</span><br><span class="line">|    99 |</span><br><span class="line">|    88 |</span><br><span class="line">|    35 |</span><br><span class="line">|     3 |</span><br><span class="line">|     1 |</span><br><span class="line">+-------+</span><br><span class="line">7 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>select查询运算</p>
<p>  假设我们现在所有的商品都要打8折，那么可以这样查询输出:</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select *,price*0.8 from product;</span><br><span class="line">+-----+--------------+-------+---------------------+------+--------------------+</span><br><span class="line">| pid | pname        | price | pdate               | cno  | price*0.8          |</span><br><span class="line">+-----+--------------+-------+---------------------+------+--------------------+</span><br><span class="line">|   4 | 小米mix2s    |  2700 | 2019-04-14 13:14:31 |    1 |               2160 |</span><br><span class="line">|   5 | 华为p30      |  4788 | 2019-04-14 13:14:32 |    1 |             3830.4 |</span><br><span class="line">|   6 | 阿迪王       |    99 | 2019-04-14 13:14:32 |    2 |               79.2 |</span><br><span class="line">|   7 | 老村长       |    88 | 2019-04-14 13:14:32 |    3 |               70.4 |</span><br><span class="line">|   8 | 劲酒         |    35 | 2019-04-14 13:14:32 |    3 |                 28 |</span><br><span class="line">|   9 | 小熊饼干     |     3 | 2019-04-14 13:14:32 |    4 | 2.4000000000000004 |</span><br><span class="line">|  10 | 卫龙辣条     |     1 | 2019-04-14 13:14:32 |    5 |                0.8 |</span><br><span class="line">|  11 | 旺旺雪饼     |     1 | 2019-04-14 13:14:32 |    5 |                0.8 |</span><br><span class="line">+-----+--------------+-------+---------------------+------+--------------------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>  可以加一个列别名:</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select *,price*0.8 as 8折折后价 from product;</span><br><span class="line">+-----+--------------+-------+---------------------+------+--------------------+</span><br><span class="line">| pid | pname        | price | pdate               | cno  | 8折折后价          |</span><br><span class="line">+-----+--------------+-------+---------------------+------+--------------------+</span><br><span class="line">|   4 | 小米mix2s    |  2700 | 2019-04-14 13:14:31 |    1 |               2160 |</span><br><span class="line">|   5 | 华为p30      |  4788 | 2019-04-14 13:14:32 |    1 |             3830.4 |</span><br><span class="line">|   6 | 阿迪王       |    99 | 2019-04-14 13:14:32 |    2 |               79.2 |</span><br><span class="line">|   7 | 老村长       |    88 | 2019-04-14 13:14:32 |    3 |               70.4 |</span><br><span class="line">|   8 | 劲酒         |    35 | 2019-04-14 13:14:32 |    3 |                 28 |</span><br><span class="line">|   9 | 小熊饼干     |     3 | 2019-04-14 13:14:32 |    4 | 2.4000000000000004 |</span><br><span class="line">|  10 | 卫龙辣条     |     1 | 2019-04-14 13:14:32 |    5 |                0.8 |</span><br><span class="line">|  11 | 旺旺雪饼     |     1 | 2019-04-14 13:14:32 |    5 |                0.8 |</span><br><span class="line">+-----+--------------+-------+---------------------+------+--------------------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>  上述的输出，其实<strong>并不改变库内的数据，仅仅是在查询结果上做了运算</strong>。</p>
</li>
<li><p>where关键字进行条件查询</p>
<p>  指定条件，确定要查询记录</p>
<ul>
<li><p>查询价格大于60的商品：<code>select * from where price &gt; 60;</code></p>
</li>
<li><p>where后的关系运算符：<code>&gt; &gt;= &lt; &lt;= = != &lt;&gt;</code> &lt;&gt;和!=都为不等于，区别在于&lt;&gt;是标准sql语法而!=是非标准的sql语法</p>
</li>
<li><p>where后的逻辑运算符： <code>and, or, not</code></p>
</li>
<li><p>查询价格大于10并且小于100的商品: <code>select * from product where price &lt; 100 and price &gt; 10;</code><br>也可以使用<code>between...and...</code>,<code>select * from product where price between 10 and 100;</code></p>
</li>
<li><p>like 模糊查询</p>
<ul>
<li><p><code>_</code>代表的是一个字符</p>
</li>
<li><p><code>%</code>代表的是多个字符</p>
</li>
<li><p>查询出商品名称中带有”小”的所有商品：<code>select * from product where pname like &quot;%小%&quot;;</code></p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from product where pname like &quot;%小%&quot;;</span><br><span class="line">+-----+--------------+-------+---------------------+------+</span><br><span class="line">| pid | pname        | price | pdate               | cno  |</span><br><span class="line">+-----+--------------+-------+---------------------+------+</span><br><span class="line">|   4 | 小米mix2s    |  2700 | 2019-04-14 13:14:31 |    1 |</span><br><span class="line">|   9 | 小熊饼干     |     3 | 2019-04-14 13:14:32 |    4 |</span><br><span class="line">+-----+--------------+-------+---------------------+------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询名字第二个字是’熊’的商品:<code>select * from product where pname like &quot;_熊%&quot;;</code></p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from product where pname like &quot;_熊%&quot;;</span><br><span class="line">+-----+--------------+-------+---------------------+------+</span><br><span class="line">| pid | pname        | price | pdate               | cno  |</span><br><span class="line">+-----+--------------+-------+---------------------+------+</span><br><span class="line">|   9 | 小熊饼干     |     3 | 2019-04-14 13:14:32 |    4 |</span><br><span class="line">+-----+--------------+-------+---------------------+------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>in 在某个范围中获得值</p>
<ul>
<li>查询出商品分类id在1,4,5里面的所有商品<code>select * from product where cno in (1,4,5);</code></li>
</ul>
</li>
</ul>
</li>
<li><p>排序查询：order by 关键字. 关键字: asc(ascend升序,为默认值), desc(descend降序).</p>
<ul>
<li>查询所有商品进行按价格降序排列: <code>select * from product order by price desc;</code></li>
<li>查询商品名称中含有”小”的所有商品并且进行按价格降序排列: <code>select * from product where pname like &quot;%小%&quot; order by price desc;</code></li>
</ul>
</li>
</ul>
</li>
<li><p>复杂查询</p>
<ul>
<li><p>聚合函数：</p>
<p>函数 | 作用<br>sum() | 求和<br>count() | 统计数量<br>max() | 最大值<br>min() | 最小值<br>avg() | 平均值</p>
</li>
<li><p>获得所有商品价格的总和：<code>select sum(price) from product;</code></p>
</li>
<li><p>获得所有商品价格的平均值：<code>select avg(price) from product;</code></p>
</li>
<li><p>获得所有商品的个数：<code>select count(*) from product;</code></p>
<blockquote>
<p>需要注意的是：<strong>where后面不能接聚合函数！</strong></p>
</blockquote>
<p>由于where后面不能加聚合函数，所以如果想要查询到价格大于平均价格的所有商品时。需要这么写（子查询）:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> product <span class="keyword">where</span> price &gt; (<span class="keyword">select</span> <span class="keyword">avg</span>(price) <span class="keyword">from</span> product);</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from product where price &gt; (select avg(price) from product);</span><br><span class="line">+-----+-------------+-------+---------------------+------+</span><br><span class="line">| pid | pname       | price | pdate               | cno  |</span><br><span class="line">+-----+-------------+-------+---------------------+------+</span><br><span class="line">|   4 | 小米mix2s   |  2700 | 2019-04-14 13:14:31 |    1 |</span><br><span class="line">|   5 | 华为p30     |  4788 | 2019-04-14 13:14:32 |    1 |</span><br><span class="line">+-----+-------------+-------+---------------------+------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
</li>
<li><p>分组： group by</p>
<ul>
<li><p>根据cno字段去进行分组，统计各个种类商品的个数：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> cno <span class="keyword">as</span> 商品种类,<span class="keyword">count</span>(*) <span class="keyword">as</span> 商品个数 <span class="keyword">from</span> product <span class="keyword">group</span> <span class="keyword">by</span> cno;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select cno as 商品种类,count(*) as 商品个数 from product group by cno;</span><br><span class="line">+--------------+--------------+</span><br><span class="line">| 商品种类     | 商品个数     |</span><br><span class="line">+--------------+--------------+</span><br><span class="line">|            1 |            2 |</span><br><span class="line">|            2 |            1 |</span><br><span class="line">|            3 |            2 |</span><br><span class="line">|            4 |            1 |</span><br><span class="line">|            5 |            2 |</span><br><span class="line">+--------------+--------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<ul>
<li>根据cno分组，分组统计每组商品的平均价格，并且商品平均价格&gt;60<br>直接根据cno分组，分组统计每组商品的平均价格可以这样写：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> cno <span class="keyword">as</span> 商品种类, <span class="keyword">avg</span>(price) <span class="keyword">as</span> 平均价格 <span class="keyword">from</span> product <span class="keyword">group</span> <span class="keyword">by</span> cno;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select cno as 商品种类, avg(price) as 平均价格 from product group by cno;</span><br><span class="line">+--------------+--------------+</span><br><span class="line">| 商品种类     | 平均价格     |</span><br><span class="line">+--------------+--------------+</span><br><span class="line">|            1 |         3744 |</span><br><span class="line">|            2 |           99 |</span><br><span class="line">|            3 |         61.5 |</span><br><span class="line">|            4 |            3 |</span><br><span class="line">|            5 |            1 |</span><br><span class="line">+--------------+--------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>还有过滤掉平均价格不大于60的商品，要使用<code>having</code>关键字：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> cno <span class="keyword">as</span> 商品种类, <span class="keyword">avg</span>(price) <span class="keyword">as</span> 平均价格 <span class="keyword">from</span> product <span class="keyword">group</span> <span class="keyword">by</span> cno <span class="keyword">having</span> <span class="keyword">avg</span>(price) &gt; <span class="number">60</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select cno as 商品种类, avg(price) as 平均价格 from product group by cno having avg(price) &gt; 60;</span><br><span class="line">+--------------+--------------+</span><br><span class="line">| 商品种类     | 平均价格     |</span><br><span class="line">+--------------+--------------+</span><br><span class="line">|            1 |         3744 |</span><br><span class="line">|            2 |           99 |</span><br><span class="line">|            3 |         61.5 |</span><br><span class="line">+--------------+--------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>having关键字，可以接聚合函数，并且出现在分组之后</p>
</blockquote>
<blockquote>
<p>where关键字，不可以接聚合函数，并且出现在分组之前</p>
</blockquote>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="sql语句的编写顺序和执行顺序"><a href="#sql语句的编写顺序和执行顺序" class="headerlink" title="sql语句的编写顺序和执行顺序"></a>sql语句的编写顺序和执行顺序</h4><ul>
<li>编写顺序：<br>select … from … where … group by … having … order by …</li>
<li>执行顺序：<br>from … where … group by … having … select … order by …</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://deejay0921.github.io/2019/04/14/mysql的简单了解/" data-id="ck0hpiil90003l4vx7fhikvdc" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Java线程模型" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/26/Java线程模型/" class="article-date">
  <time datetime="2019-03-26T00:04:10.000Z" itemprop="datePublished">2019-03-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/26/Java线程模型/">Java线程模型.md</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="https://github.com/Homiss/Java-interview-questions/blob/master/%E5%A4%9A%E7%BA%BF%E7%A8%8B/Java%E9%9D%A2%E8%AF%95%E9%A2%98%E4%B9%8B%E5%A4%9A%E7%BA%BF%E7%A8%8B(%E4%B8%80).md" target="_blank" rel="noopener">面试–线程</a></p>
<p><a href="https://www.zhihu.com/question/65200684" target="_blank" rel="noopener">知乎–java中的多线程究竟在什么情况下使用？</a></p>
<p><a href="https://www.zhihu.com/question/19901763" target="_blank" rel="noopener">知乎–多线程有什么用？？</a></p>
<p><a href="http://www.runoob.com/java/java-multithreading.html" target="_blank" rel="noopener">菜鸟教程–多线程编程</a></p>
<h3 id="Java线程的概念"><a href="#Java线程的概念" class="headerlink" title="Java线程的概念"></a>Java线程的概念</h3><p>Java内置支持多线程编程(multithreaded programming),多线程程序包含2条或者2条以上并发运行的部分，程序中每个这样的部分叫做<strong>线程(thread)</strong>,<br>每个线程都有独立的运行路径。因此多线程任务是多任务处理的一种特殊形式。</p>
<h3 id="进程和线程的比较"><a href="#进程和线程的比较" class="headerlink" title="进程和线程的比较"></a>进程和线程的比较</h3><ul>
<li>进程：程序执行时所占用的所有的资源的总称或者说是容器</li>
<li>线程：是基本执行单元<br><img src="http://upload-images.jianshu.io/upload_images/7113407-592396d2ecdba143.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></li>
</ul>
<p>简单总结： <strong>进程是线程的容器。</strong></p>
<h3 id="进程中的主线程"><a href="#进程中的主线程" class="headerlink" title="进程中的主线程"></a>进程中的主线程</h3><p>主线程的重要性体现在： </p>
<ul>
<li>他是<strong>产生</strong>其他子线程的线程</li>
<li>通常它必须是最后完成执行，因为它将执行各种关闭操作</li>
</ul>
<p>主线程是运行程序时候自动创建的，但是其也是一个<strong>Thread类的实例对象</strong></p>
<blockquote>
<p>一般由主线程创建其他子线程，然后由主线程惯例其他线程。</p>
</blockquote>
<h3 id="关于Thread类的基本使用"><a href="#关于Thread类的基本使用" class="headerlink" title="关于Thread类的基本使用"></a>关于Thread类的基本使用</h3><p>Java的多线程系统建立于Thread类和Runable接口. Thread类定义了好几种方法来帮助管理线程：<br>方法|意义<br>—————-|——————–<br>getName|获取线程名称<br>getPriority|获取线程优先级<br>isAlive|判定线程是否仍在执行<br>join|等待一个线程终止<br>run|线程的入口<br>sleep|在一定时间内挂起线程<br>start|通过调用运行方法来启动线程</p>
<h3 id="继承Thread类创建新的线程"><a href="#继承Thread类创建新的线程" class="headerlink" title="继承Thread类创建新的线程"></a>继承Thread类创建新的线程</h3><ul>
<li>我们可以通过继承Thread类，Override run()方法，然后创建该类的实例来创建除了主线程之外的其他线程，并且在run()方法中赋予属于这个线程的代码逻辑，这个run()方法是新线程的入口。</li>
<li>这个新建的Thread的子类，会继承Thread类的一个start()方法，调用start()方法时，会自动生成一个线程，然后调用run()方法执行该线程的逻辑。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">package com.DeeJay.ThreadDemo;</span><br><span class="line"></span><br><span class="line">public class ThreadDemo extends Thread&#123; // 自定义线程类</span><br><span class="line">//    运行的代码逻辑和主线程不同</span><br><span class="line">    public ThreadDemo() &#123;</span><br><span class="line">//        创建一个新的子线程</span><br><span class="line">        super(&quot;Child Thread&quot;);</span><br><span class="line">//        显式的开始执行这个线程 ===&gt; 做一些基本的初始化操作 ===&gt; run()</span><br><span class="line">        this.start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">//    新的子线程的入口！</span><br><span class="line">    @Override</span><br><span class="line">    public void run() &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            for (int i = 0; i &lt; 10; i ++) &#123;</span><br><span class="line">                System.out.println(&quot;Child Thread: &quot; + i);</span><br><span class="line">                Thread.sleep(1000);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;catch (Exception e) &#123;</span><br><span class="line">            System.out.println(&quot;Child Thread Error!&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">package com.DeeJay;</span><br><span class="line"></span><br><span class="line">import com.DeeJay.ThreadDemo.ThreadDemo;</span><br><span class="line"></span><br><span class="line">public class Main &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">//        创建新的子线程！</span><br><span class="line">        ThreadDemo t = new ThreadDemo();</span><br><span class="line">        // 需要注意的是此处代码执行并不会像单线程一样阻塞，而是会立即执行下面语句</span><br><span class="line">//        调用完构造函数和start()之后， 子线程开始执行，主线程返回到Main(),开始自己的逻辑</span><br><span class="line">//        主线程逻辑</span><br><span class="line">        try &#123;</span><br><span class="line">            for (int i = 0; i &lt; 5; i ++) &#123;</span><br><span class="line">                System.out.println(&quot;Main Thread: &quot; + i);</span><br><span class="line">                Thread.sleep(1000);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;catch (Exception e) &#123;</span><br><span class="line">            System.out.println(&quot;Main Thread Error!&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>此处在定义新的线程类的时候，也可以不在构造函数内部直接执行start(),可以等新的线程类的实例对象创建后手动执行start()开始子线程逻辑。</p>
</blockquote>
<h3 id="实现Runable接口来创建新的线程"><a href="#实现Runable接口来创建新的线程" class="headerlink" title="实现Runable接口来创建新的线程"></a>实现Runable接口来创建新的线程</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">package com.DeeJay.ThreadDemo;</span><br><span class="line"></span><br><span class="line">public class ThreadDemo implements Runnable&#123; // 改为实现Runnable接口</span><br><span class="line">    private Thread t;</span><br><span class="line"></span><br><span class="line">    public ThreadDemo(String name) &#123;</span><br><span class="line">//        选用带target的构造函数， 将this传过去，本质上就是把run()方法传递过去</span><br><span class="line">        t = new Thread(this, name);</span><br><span class="line">        t.start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //    一样的  实现run() 作为线程的入口</span><br><span class="line">    @Override</span><br><span class="line">    public void run() &#123;</span><br><span class="line">        for (int i = 0; i &lt; 5; i ++) &#123;</span><br><span class="line">            System.out.println(&quot;Runnable Thread: &quot; + i);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(t.getName() + &quot; existing&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">package com.DeeJay;</span><br><span class="line"></span><br><span class="line">import com.DeeJay.ThreadDemo.ThreadDemo;</span><br><span class="line"></span><br><span class="line">public class Main &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        new ThreadDemo(&quot;Child Thread&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="线程同步"><a href="#线程同步" class="headerlink" title="线程同步"></a>线程同步</h3><p>当多个线程需要<strong>共享资源</strong>，他们就需要某种方法来确定资源在某一刻<strong>仅被一个</strong>线程占用着。</p>
<p>达到上述目的的过程就叫做<strong>同步(synchronization)</strong></p>
<h4 id="synchronized方法的使用"><a href="#synchronized方法的使用" class="headerlink" title="synchronized方法的使用"></a>synchronized方法的使用</h4><p>当一个线程在一个synchronized方法的内部，所有试图调用该方法（或者其他synchronized方法）的<strong>同一个实例对象</strong>的线程<strong>必须等待</strong>。为了退出管程，并释放对对象的控制权给其他等待的线程，拥有管程的线程仅需从synchronized方法返return即可。</p>
<blockquote>
<p><strong>一般如果一个对象的方法可能被多线程使用，则用synchronized关键字修饰</strong></p>
</blockquote>
<p>来看一个具体的使用synchronized方法的例子：<br>Callme.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">package com.DeeJay;</span><br><span class="line"></span><br><span class="line">public class Callme &#123;</span><br><span class="line">    public void call(String msg) &#123;</span><br><span class="line">        System.out.print(&quot;[&quot; + msg);</span><br><span class="line">        try &#123;</span><br><span class="line">            Thread.sleep(1000);</span><br><span class="line">        &#125;catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.print(&quot;]&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Caller.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">package com.DeeJay;</span><br><span class="line"></span><br><span class="line">public class Caller implements Runnable&#123;</span><br><span class="line">    private String msg;</span><br><span class="line">    Thread t;</span><br><span class="line">    Callme target;</span><br><span class="line"></span><br><span class="line">    public Caller(String msg, Callme target) &#123;</span><br><span class="line">        this.msg = msg;</span><br><span class="line">        this.t = new Thread(this);</span><br><span class="line">        this.target = target;</span><br><span class="line">        t.start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void run() &#123;</span><br><span class="line">        target.call(this.msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Main</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">package com.DeeJay;</span><br><span class="line"></span><br><span class="line">public class Main &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Callme target = new Callme(); // 共享的资源</span><br><span class="line"></span><br><span class="line">        Caller c1 = new Caller(&quot;hello&quot;, target);</span><br><span class="line">        Caller c2 = new Caller(&quot;world&quot;, target);</span><br><span class="line">        Caller c3 = new Caller(&quot;synchronized&quot;, target);</span><br><span class="line"></span><br><span class="line">        try &#123;</span><br><span class="line">            c1.t.join();</span><br><span class="line">            c2.t.join();</span><br><span class="line">            c3.t.join();</span><br><span class="line">        &#125;catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;\n&quot;);</span><br><span class="line">        System.out.println(&quot;Main Thread End!&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上述例子中，主线程中new出来的target即为几个子线程公用的资源。当调用三个子线程时，三个子线程会并发执行，并不会等到一个执行完再执行下一个，所以看到的输出结果为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[hello[world[synchronized]]]</span><br></pre></td></tr></table></figure>

<p>我们想达到的效果是在一个子线程占用公用资源target时，不允许其他线程也使用该资源，为了达到这个效果，就可以给将target的这个call方法用<code>synchronized</code>修饰：<br>Callme.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">package com.DeeJay;</span><br><span class="line"></span><br><span class="line">public class Callme &#123;</span><br><span class="line">    public synchronized void call(String msg) &#123;</span><br><span class="line">        System.out.print(&quot;[&quot; + msg);</span><br><span class="line">        try &#123;</span><br><span class="line">            Thread.sleep(1000);</span><br><span class="line">        &#125;catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.print(&quot;]&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>之后再运行，可以看到输出的为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[hello][synchronized][world]</span><br></pre></td></tr></table></figure>

<h4 id="synchronized修饰语句块"><a href="#synchronized修饰语句块" class="headerlink" title="synchronized修饰语句块"></a>synchronized修饰语句块</h4><p>对于上述的例子，还可以使用<code>synchronized</code>修饰代码块来达到相同的效果，synchronized修饰的代码块就是同步执行的，我们可以不用在Callme类中修改call方法为synchronized，而是在调用Callme实例对象的Caller类中，将代码块置为synchronized，这样代码块中的逻辑也达到了同步的效果。<br>Caller.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">package com.DeeJay;</span><br><span class="line"></span><br><span class="line">public class Caller implements Runnable&#123;</span><br><span class="line">    private String msg;</span><br><span class="line">    Thread t;</span><br><span class="line">    Callme target;</span><br><span class="line"></span><br><span class="line">    public Caller(String msg, Callme target) &#123;</span><br><span class="line">        this.msg = msg;</span><br><span class="line">        this.t = new Thread(this);</span><br><span class="line">        this.target = target;</span><br><span class="line">        t.start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void run() &#123;</span><br><span class="line">        synchronized (target) &#123; // synchronized block</span><br><span class="line">            target.call(this.msg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="关于join"><a href="#关于join" class="headerlink" title="关于join"></a>关于join</h4><p>关于join()方法，join方法的作用是，当我们调用某个线程的这个方法时，这个方法会挂起<strong>调用线程</strong>，直到被调用线程结束执行，调用线程才会继续执行。</p>
<p>关键是理解<strong>挂起调用线程</strong>，首先举个例子：<br>子线程：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">package com.DeeJay.ThreadDemo;</span><br><span class="line"></span><br><span class="line">public class ThreadDemo extends Thread&#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void run() &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Thread.sleep(1000);</span><br><span class="line">        &#125;catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;Child Thread End!&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Main:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">package com.DeeJay;</span><br><span class="line"></span><br><span class="line">import com.DeeJay.ThreadDemo.ThreadDemo;</span><br><span class="line"></span><br><span class="line">public class Main &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ThreadDemo t = new ThreadDemo();</span><br><span class="line">        t.start();</span><br><span class="line">        try &#123;</span><br><span class="line">            t.join(); // </span><br><span class="line">        &#125;catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;Main Thread End!&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>子线程的逻辑是等待1秒后输出信息，当调用join()后，子线程的调用线程此时是主线程，所以主线程会暂时挂起不继续执行，等待子线程执行完成后，才会继续执行主线程。这时候才输出主线程中的信息。所以此时输出信息应该为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// 一秒后输出：</span><br><span class="line">Child Thread End!</span><br><span class="line">Main Thread End!</span><br></pre></td></tr></table></figure>

<p>但是如果不调用子线程的join()，此时主线程并不会挂起，会和子线程并发执行，主线程并没有等待，所以会先于子线程执行：<br>子线程：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">package com.DeeJay;</span><br><span class="line"></span><br><span class="line">import com.DeeJay.ThreadDemo.ThreadDemo;</span><br><span class="line"></span><br><span class="line">public class Main &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ThreadDemo t = new ThreadDemo();</span><br><span class="line">        t.start();</span><br><span class="line">        try &#123;</span><br><span class="line">//            t.join(); // 不调用join 在子线程执行的过程中 主线程并不会被挂起</span><br><span class="line">        &#125;catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;Main Thread End!&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>此时输出为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Main Thread End!  // 马上输出</span><br><span class="line">Child Thread End! // 过一秒后输出</span><br></pre></td></tr></table></figure>

<p>当有多个子线程时，如果前面的子线程先于后面的子线程调用start()之前调用join()的话，此时调用线程还是主线程，主线程<strong>依然会挂起</strong>，所以后面子线程的start()的逻辑要等到前面子线程执行完后主线程继续开始执行才能执行到。所以会有单线程的表现形式，但是此时其实仍是多线程。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">package com.DeeJay;</span><br><span class="line"></span><br><span class="line">import com.DeeJay.ThreadDemo.ThreadDemo;</span><br><span class="line"></span><br><span class="line">public class Main &#123;</span><br><span class="line">    public static void main(String[] args) throws InterruptedException &#123;</span><br><span class="line">        ThreadDemo t1 = new ThreadDemo();</span><br><span class="line">        ThreadDemo t2 = new ThreadDemo();</span><br><span class="line">        t1.start();</span><br><span class="line">        t1.join(); //  此处调用t1的join() 会挂起主线程  t1执行结束后才唤醒主线程继续执行t2.start()</span><br><span class="line">        t2.start();</span><br><span class="line">        t2.join(); // 同理 t2开始执行时挂起主线程 t2执行完后唤醒主线程</span><br><span class="line">        System.out.println(&quot;Main Thread End!&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Child Thread End! // 过1秒</span><br><span class="line">Child Thread End! // 过2秒</span><br><span class="line">Main Thread End! // 过2秒</span><br></pre></td></tr></table></figure>

<h3 id="线程之间的通信"><a href="#线程之间的通信" class="headerlink" title="线程之间的通信"></a>线程之间的通信</h3><p>以下方法用来和其他线程进行交流, 并且<strong>只能在synchronize修饰的代码块或者方法里调用:</strong></p>
<p>wait( ) 告知被调用的线程放弃管程进入睡眠直到其他线程进入相同管程并且调用notify( )。<br>notify( ) 恢复<strong>相同对象</strong>中第一个调用 wait( ) 的线程。<br>notifyAll( ) 恢复<strong>相同对象</strong>中所有调用 wait( ) 的线程。具有最高优先级的线程最先运行。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.DeeJay.ThreadDemo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Q</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> n; <span class="comment">// 生产的对象</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> isDataReady = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">get</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!isDataReady)&#123;</span><br><span class="line">            wait(); <span class="comment">// 暂停, 等待着put()来设置好这个值只后再读取</span></span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"Get "</span> + n);</span><br><span class="line">        isDataReady = <span class="keyword">false</span>;  <span class="comment">// 标记已经取走了值</span></span><br><span class="line">        notify(); <span class="comment">// 通知put()可以设置另外一个值了</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.n;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(<span class="keyword">int</span> n)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        <span class="comment">// 如果这个值已经设置好了</span></span><br><span class="line">        <span class="keyword">if</span> (isDataReady) &#123;</span><br><span class="line">            wait(); <span class="comment">// 等待get()把值取走</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.n = n; <span class="comment">//设置一个新的值</span></span><br><span class="line">        isDataReady = <span class="keyword">true</span>; <span class="comment">// 标记已经设置好了</span></span><br><span class="line">        System.out.println(<span class="string">"Put: "</span> + n);</span><br><span class="line">        notify(); <span class="comment">// 通知线程get() 这个最新的值</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="关于死锁"><a href="#关于死锁" class="headerlink" title="关于死锁"></a>关于死锁</h4><p>死锁发生在当两个线程对一对同步对象有循环依赖关系时</p>
<p>比如说有ABC三个子线程，A依赖于B，B依赖于C，C依赖于A，就有可能出现死锁。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://deejay0921.github.io/2019/03/26/Java线程模型/" data-id="ck0hpiil50002l4vxs2crgazs" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/04/25/JDBC的简单了解/">JDBC的简单了解.md</a>
          </li>
        
          <li>
            <a href="/2019/04/22/对XML以及Tomcat的简单了解/">对XML以及Tomcat的简单了解.md</a>
          </li>
        
          <li>
            <a href="/2019/04/20/Java中的Collections工具类及Comparator和Comparable的区别/">Java中的Collections工具类及Comparator和Comparable的区别.md</a>
          </li>
        
          <li>
            <a href="/2019/04/20/sql多表查询/">sql多表查询.md</a>
          </li>
        
          <li>
            <a href="/2019/04/14/mysql的简单了解/">mysql的简单了解.md</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 DeeJay<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>