<!DOCTYPE html>
<html>
  <!-- Html Head Tag-->
  <head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content>
  <meta name="author" content="DeeJay">
  <!-- Open Graph Data -->
  <meta property="og:title" content="Collection体系原理了解">
  <meta property="og:description" content="web前端 Java后端">
  <meta property="og:site_name" content="DeeJay&#39;s Blog">
  <meta property="og:type" content="article">
  <meta property="og:image" content="https://deejay0921.github.io">
  
    <link rel="alternate" href="/atom.xml" title="DeeJay&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.jpg">
  

  <!-- Site Title -->
  <title>DeeJay's Blog</title>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <!-- Custom CSS -->
  
  <link rel="stylesheet" href="/css/style.light.css">

  <!-- Google Analytics -->
  

</head>

  <body>
    <!-- Page Header -->


<header class="site-header header-background" style="background-image: url(/img/blog-banner2.png)">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="page-title with-background-image">
          <p class="title">Collection体系原理了解</p>
          <p class="subtitle"></p>
        </div>
        <div class="site-menu with-background-image">
          <ul>
            
              <li>
                <a href="/">
                  
                  Home
                  
                </a>
              </li>
            
              <li>
                <a href="/archives">
                  
                  Archives
                  
                </a>
              </li>
            
              <li>
                <a href="https://github.com/DeeJay0921">
                  
                  Github
                  
                </a>
              </li>
            
              <li>
                <a href="mailto:1018805743@qq.com">
                  
                  Email
                  
                </a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>

<article>
  <div class="container typo">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-info text-muted">
          
            <!-- Author -->
            <span class="author info">By DeeJay</span>
          
          <!-- Date -->
          <span class="date-time info">On
            <span class="date">2019-07-22</span>
            <span class="time">18:00:31</span>
          </span>
          
          <!--  Categories  -->
            <span class="categories info">Under 

<a href="/categories/Java/">Java</a>
</span>
          
        </div>
        <!-- Tags -->
        
          <div class="post-tags text-muted">
            Tags: 

<a class="tag" href="/tags/Java/">#Java</a> <a class="tag" href="/tags/集合/">#集合</a> <a class="tag" href="/tags/Collection/">#Collection</a>


          </div>
        
        <!-- Post Main Content -->
        <div class="post-content">
          <p>Collection体系原理了解</p>
<a id="more"></a>

<h1 id="Collection体系简介"><a href="#Collection体系简介" class="headerlink" title="Collection体系简介"></a>Collection体系简介</h1><ul>
<li><p>Collecion的体系</p>
<ul>
<li>Collection的体系结构<br><a href="https://juejin.im/entry/58fc6a07a0bb9f0065be95cc" target="_blank" rel="noopener">集合体系</a><br>集合体系中有2大类，Collection和Map，其中Collection下又有List和Set。</li>
<li>List/Set约定<br>List有序，Set无序。<blockquote>
<p>有序无序意味着存在索引且从0开始</p>
</blockquote>
</li>
</ul>
</li>
<li><p>Collection体系提供的常用方法</p>
<ul>
<li>new: <code>new ArrayList(Collection)</code>, <code>new ArrayList()</code></li>
<li>R: <code>size()</code>/ <code>isEmpty()</code>/ <code>contains()</code> / <code>for()</code> / <code>stream()</code></li>
<li>C/U: <code>add()</code>/ <code>addAll()</code>/ <code>retainAll()</code></li>
<li>D: <code>clear()</code>/ <code>remove()</code>/ <code>removeAll()</code></li>
</ul>
</li>
</ul>
<h1 id="List"><a href="#List" class="headerlink" title="List"></a>List</h1><ul>
<li>最常用的ArrayList<ul>
<li>本质上就是一个数组，但是在add的时候会去动态的增加自己的长度(即创建一个新的数组)</li>
</ul>
</li>
<li>常见面试题： 动态扩容的实现<ul>
<li>创建一个更大的空间，然后把原先的所有元素拷贝过去</li>
</ul>
</li>
</ul>
<h1 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h1><ul>
<li>不允许有重复元素的集合<ul>
<li>判断重复调用的是<code>equals()</code></li>
</ul>
</li>
<li>如果要自己实现一个Set，怎么实现?</li>
</ul>
<p>1.如果要自己实现一个Set，肯定能想到的是一个简单思路就是每次添加新元素时，查看现有的元素中存不存在目标元素，如果有则不加入。这样的思路的问题是，如果现有的元素已经有很多了的话，那么会比较很多次，性能会受影响。<br>2.所以举个例子：假设我们要把所有用户的姓名加入到一个自己实现的Set中来时，我们可以先根据用户的姓来进行比较添加，比如现有赵钱孙李四种姓氏，要添加赵四时，就只需要去跟赵姓中的元素们进行比较，如有相同则不添加，不需要跟整个现有集合进行比较。提高了性能。<br>3.上述的例子，就是hashCode的含义，对于Set集合，将Object们对应为一个个的int值，相同的int值对应的就相当于是一个姓氏，新加Object时，就只需要跟相同int值的Object们进行equals比较就好了。而这个将Object对应为int值的方法，就是<code>hashCode()</code></p>
<blockquote>
<p>上述的一个个int值对应的小集合，称为hash桶</p>
</blockquote>
<ul>
<li>Java世界里的又一重要约定: <strong>hashCode</strong><ul>
<li>同一个对象必须始终返回相同的hashCode</li>
<li>两个对象的equals返回true，必须返回相同的hashCode</li>
<li>两个对象不等，也可能返回相同的hashCode</li>
</ul>
</li>
</ul>
<h3 id="哈希算法"><a href="#哈希算法" class="headerlink" title="哈希算法"></a>哈希算法</h3><ul>
<li>哈希就是一个单向的映射<br>因为int值是有限度的，总共也就42亿中hash值，而对象可能有更多种，所以只能从对象映射到int值，不能反向映射，所以是单向的。</li>
<li>例子：见从姓名到姓的哈希运算</li>
<li>从任意对象到一个整数的hashCode</li>
</ul>
<h2 id="HashSet"><a href="#HashSet" class="headerlink" title="HashSet"></a>HashSet</h2><ul>
<li>最常用，最高效的Set实现</li>
<li>HashSet的高效性<br>使用Hash算法使得HashSet的查找性能特别高</li>
<li>使用HashSet可以进行去重</li>
<li>HashSet是无序的！如果需要排序得使用LinkedHashSet</li>
</ul>
<h1 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h1><ul>
<li>Map的简介与实战：<ul>
<li>C/U: <code>put()</code>/ <code>putAll()</code></li>
<li>R: <ul>
<li><code>get()</code>/ <code>size()</code></li>
<li><code>containsKey()</code>/ <code>containsValue()</code></li>
<li><code>keySet()</code>/ <code>values()</code>/ <code>entrySet()</code><blockquote>
<p>关于keySet()，返回的是一个包含所有key的set，任何对这个set的修改都会反映到原先的Map上，反之亦然，切记！！</p>
</blockquote>
</li>
</ul>
</li>
</ul>
</li>
<li>D: <code>remove()</code>/ <code>clear()</code></li>
</ul>
<h2 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap"></a>HashMap</h2><ul>
<li>最常用，最高效的Map实现</li>
<li>常见面试题：<ul>
<li>HashMap的扩容（resize()方法，本质思路还是一样的，创建一个更大的HashMap）</li>
<li>HashMap的线程不安全性（使用ConcurentHashMap）</li>
<li>HashMap在Java7+后的改变： 链表 -&gt; 红黑树<br>是为了防止大量对象的hashCode值一样导致性能下降改变的。</li>
</ul>
</li>
<li>HashMap和HashSet在本质上其实是一种东西<blockquote>
<p>HashMap的key就是一个HashSet</p>
</blockquote>
</li>
</ul>
<h2 id="有序集合TreeSet和TreeMap"><a href="#有序集合TreeSet和TreeMap" class="headerlink" title="有序集合TreeSet和TreeMap"></a>有序集合TreeSet和TreeMap</h2><p>和LinkedHashSet不同的是，TreeSet会对内部的元素进行一次默认的排序，而不是仅仅按照插入的顺序存储。<br>另外TreeSet其内部结构是一个二叉树，可以把查找的算法复杂度从o(n)下降到o(logn)（和ArrayList对比）。</p>
<h1 id="Collections工具类的常用工具方法"><a href="#Collections工具类的常用工具方法" class="headerlink" title="Collections工具类的常用工具方法"></a>Collections工具类的常用工具方法</h1><ul>
<li>emptySet,emptyMap</li>
<li>synchronizedCollection: 将一个集合变成线程安全的。</li>
<li>unmodifiableCollection: 将一个集合变成不可变的（Guava的Immutable）。</li>
</ul>
<h1 id="Collection的其他实现"><a href="#Collection的其他实现" class="headerlink" title="Collection的其他实现"></a>Collection的其他实现</h1><ul>
<li>Queue/Deque</li>
<li>Vector/Stack</li>
<li>LinkedList</li>
<li>ConcurrentHashMap</li>
<li>PriorityQueue</li>
</ul>
<h1 id="Guava"><a href="#Guava" class="headerlink" title="Guava"></a>Guava</h1><ul>
<li>Lists/Sets/Maps工具类</li>
<li>ImmutableMap/ImmutableSet</li>
<li>Multiset/Multimap(对应多个值的Set和Map)</li>
<li>BiMap（双向的Map，可以从value对应到key）</li>
</ul>

        </div>
      </div>
    </div>
  </div>
</article>



    <!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <p class="copyright text-muted">
          Theme By <a target="_blank" href="https://github.com/levblanc">Levblanc.</a>
          Inspired By <a target="_blank" href="https://github.com/klugjo/hexo-theme-clean-blog">Clean Blog.</a>
        <p class="copyright text-muted">
          Powered By <a target="_blank" href="https://hexo.io/">Hexo.</a>
        </p>
      </div>
    </div>
  </div>
</footer>


    <!-- After Footer Scripts -->
<script src="/js/highlight.pack.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    var codeBlocks = Array.prototype.slice.call(document.getElementsByTagName('pre'))
    codeBlocks.forEach(function(block, index) {
      hljs.highlightBlock(block);
    });
  });
</script>

  </body>
</html>

