<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>Vue-cli3.0使用介绍 | DeeJay's Blog</title><meta name="description" content="Vue-cli3.0使用介绍"><meta name="keywords" content="前端,Vue"><meta name="author" content="DeeJay"><meta name="copyright" content="DeeJay"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Vue-cli3.0使用介绍"><meta name="twitter:description" content="Vue-cli3.0使用介绍"><meta name="twitter:image" content="https://pizzamanz.net/wp-content/uploads/2018/08/Vue_cli_3.png"><meta property="og:type" content="article"><meta property="og:title" content="Vue-cli3.0使用介绍"><meta property="og:url" content="https://deejay0921.github.io/2019/11/11/VueCli3.0简介/"><meta property="og:site_name" content="DeeJay's Blog"><meta property="og:description" content="Vue-cli3.0使用介绍"><meta property="og:image" content="https://pizzamanz.net/wp-content/uploads/2018/08/Vue_cli_3.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="https://deejay0921.github.io/2019/11/11/VueCli3.0简介/"><link rel="prev" title="Vue2.x+TypeScript开发指南" href="https://deejay0921.github.io/2019/11/15/Vue2.x+TypeScript开发指南/"><link rel="next" title="TypeScript 中的模块系统" href="https://deejay0921.github.io/2019/11/08/TypeScript 中的模块系统/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight_copy: 'false',
  highlight_lang: 'true',
  highlight_shrink: 'false',
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  copyright: undefined,
  copy_copyright_js: false,
  ClickShowText: undefined,
  medium_zoom: 'false',
  Snackbar: undefined
  
}</script></head><body><div id="header"> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">DeeJay's Blog</a></span><i class="fa fa-bars fa-fw toggle-menu pull_right close" aria-hidden="true"></i><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div></div></span><span class="pull_right" id="search_button"></span></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="lazyload avatar_img" src="https://avatars1.githubusercontent.com/u/20784273?s=400&amp;u=ba38b4835b7e3c4960763bc6dce9abb320c43f05&amp;v=4" onerror="onerror=null;src='/img/friend_404.gif'"></div><div class="mobile_post_data"><div class="mobile_data_item is_center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">153</div></a></div></div><div class="mobile_data_item is_center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">99</div></a></div></div><div class="mobile_data_item is_center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">7</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#安装"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">安装</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#快速原型开发"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">快速原型开发</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#正式创建项目"><span class="toc_mobile_items-number">3.</span> <span class="toc_mobile_items-text">正式创建项目</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#插件和Preset"><span class="toc_mobile_items-number">4.</span> <span class="toc_mobile_items-text">插件和Preset</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#插件"><span class="toc_mobile_items-number">4.1.</span> <span class="toc_mobile_items-text">插件</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Preset"><span class="toc_mobile_items-number">4.2.</span> <span class="toc_mobile_items-text">Preset</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#CLI服务"><span class="toc_mobile_items-number">5.</span> <span class="toc_mobile_items-text">CLI服务</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#使用命令"><span class="toc_mobile_items-number">5.1.</span> <span class="toc_mobile_items-text">使用命令</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#vue-cli-service-serve"><span class="toc_mobile_items-number">5.1.1.</span> <span class="toc_mobile_items-text">vue-cli-service serve</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#vue-cli-service-build"><span class="toc_mobile_items-number">5.1.2.</span> <span class="toc_mobile_items-text">vue-cli-service build</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#vue-cli-service-inspect"><span class="toc_mobile_items-number">5.1.3.</span> <span class="toc_mobile_items-text">vue-cli-service inspect</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#开发"><span class="toc_mobile_items-number">6.</span> <span class="toc_mobile_items-text">开发</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#HTML和静态资源"><span class="toc_mobile_items-number">6.1.</span> <span class="toc_mobile_items-text">HTML和静态资源</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#html模板插值"><span class="toc_mobile_items-number">6.1.1.</span> <span class="toc_mobile_items-text">html模板插值</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#使用CLI构建多页面应用"><span class="toc_mobile_items-number">6.1.2.</span> <span class="toc_mobile_items-text">使用CLI构建多页面应用</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#处理静态资源"><span class="toc_mobile_items-number">6.1.3.</span> <span class="toc_mobile_items-text">处理静态资源</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#从相对路径导入"><span class="toc_mobile_items-number">6.1.3.1.</span> <span class="toc_mobile_items-text">从相对路径导入</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#public文件夹"><span class="toc_mobile_items-number">6.1.3.2.</span> <span class="toc_mobile_items-text">public文件夹</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#webpack配置"><span class="toc_mobile_items-number">6.2.</span> <span class="toc_mobile_items-text">webpack配置</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#修改webpack配置"><span class="toc_mobile_items-number">6.2.1.</span> <span class="toc_mobile_items-text">修改webpack配置</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#vue-config-js中的configureWebpack"><span class="toc_mobile_items-number">6.2.1.1.</span> <span class="toc_mobile_items-text">vue.config.js中的configureWebpack</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#通过webpack-chain进行链式操作"><span class="toc_mobile_items-number">6.2.1.2.</span> <span class="toc_mobile_items-text">通过webpack-chain进行链式操作</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#审查项目的-webpack-配置"><span class="toc_mobile_items-number">6.2.2.</span> <span class="toc_mobile_items-text">审查项目的 webpack 配置</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#环境变量和模式"><span class="toc_mobile_items-number">6.3.</span> <span class="toc_mobile_items-text">环境变量和模式</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#环境变量"><span class="toc_mobile_items-number">6.3.1.</span> <span class="toc_mobile_items-text">环境变量</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#模式"><span class="toc_mobile_items-number">6.3.2.</span> <span class="toc_mobile_items-text">模式</span></a></li></ol></li></ol></li></ol></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#安装"><span class="toc-number">1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#快速原型开发"><span class="toc-number">2.</span> <span class="toc-text">快速原型开发</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#正式创建项目"><span class="toc-number">3.</span> <span class="toc-text">正式创建项目</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#插件和Preset"><span class="toc-number">4.</span> <span class="toc-text">插件和Preset</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#插件"><span class="toc-number">4.1.</span> <span class="toc-text">插件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Preset"><span class="toc-number">4.2.</span> <span class="toc-text">Preset</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#CLI服务"><span class="toc-number">5.</span> <span class="toc-text">CLI服务</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#使用命令"><span class="toc-number">5.1.</span> <span class="toc-text">使用命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#vue-cli-service-serve"><span class="toc-number">5.1.1.</span> <span class="toc-text">vue-cli-service serve</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vue-cli-service-build"><span class="toc-number">5.1.2.</span> <span class="toc-text">vue-cli-service build</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vue-cli-service-inspect"><span class="toc-number">5.1.3.</span> <span class="toc-text">vue-cli-service inspect</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#开发"><span class="toc-number">6.</span> <span class="toc-text">开发</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#HTML和静态资源"><span class="toc-number">6.1.</span> <span class="toc-text">HTML和静态资源</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#html模板插值"><span class="toc-number">6.1.1.</span> <span class="toc-text">html模板插值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用CLI构建多页面应用"><span class="toc-number">6.1.2.</span> <span class="toc-text">使用CLI构建多页面应用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#处理静态资源"><span class="toc-number">6.1.3.</span> <span class="toc-text">处理静态资源</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#从相对路径导入"><span class="toc-number">6.1.3.1.</span> <span class="toc-text">从相对路径导入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#public文件夹"><span class="toc-number">6.1.3.2.</span> <span class="toc-text">public文件夹</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#webpack配置"><span class="toc-number">6.2.</span> <span class="toc-text">webpack配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#修改webpack配置"><span class="toc-number">6.2.1.</span> <span class="toc-text">修改webpack配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#vue-config-js中的configureWebpack"><span class="toc-number">6.2.1.1.</span> <span class="toc-text">vue.config.js中的configureWebpack</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#通过webpack-chain进行链式操作"><span class="toc-number">6.2.1.2.</span> <span class="toc-text">通过webpack-chain进行链式操作</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#审查项目的-webpack-配置"><span class="toc-number">6.2.2.</span> <span class="toc-text">审查项目的 webpack 配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#环境变量和模式"><span class="toc-number">6.3.</span> <span class="toc-text">环境变量和模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#环境变量"><span class="toc-number">6.3.1.</span> <span class="toc-text">环境变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#模式"><span class="toc-number">6.3.2.</span> <span class="toc-text">模式</span></a></li></ol></li></ol></li></ol></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://pizzamanz.net/wp-content/uploads/2018/08/Vue_cli_3.png)"><div id="post-info"><div id="post-title"><div class="posttitle">Vue-cli3.0使用介绍</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2019-11-11<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> 更新于 2019-11-17</time><span class="post-meta__separator mobile_hidden">|</span><span class="mobile_hidden"><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/前端/">前端</a></span><div class="post-meta-wordcount"><i class="fa fa-eye post-meta__icon" aria-hidden="true">       </i><span>阅读量: </span><span id="busuanzi_value_page_pv"></span></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><p>Vue-cli更新到3.0之后，脚手架发生了较大的变化，本文主要介绍一下相关使用</p>
<a id="more"></a>

<p>对于本文中提到的具体配置可以查询<a href="https://cli.vuejs.org/zh/config/" target="_blank" rel="noopener">官方配置参考</a></p>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>新版的脚手架包名改为了<code>@vue/cli</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">npm install -g @vue/cli</span><br></pre></td></tr></table></figure>

<p>或者可以使用<code>npx</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">npx @vue/cli create hello-world</span><br></pre></td></tr></table></figure>

<p>直接创建项目</p>
<h1 id="快速原型开发"><a href="#快速原型开发" class="headerlink" title="快速原型开发"></a>快速原型开发</h1><p>通过安装<code>@vue/cli-service-global</code>可以对单个 <code>*.vue</code>文件进行快速原型开发</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">npm install -g @vue/cli-service-global</span><br></pre></td></tr></table></figure>

<p>安装完成之后就可以直接在目标<code>.js</code>或 <code>.vue</code>文件的目录下直接运行<code>vue serve</code>启动一个服务器,入口可以是 <code>main.js</code>、<code>index.js</code>、<code>App.vue</code> 或 <code>app.vue</code> 中的一个。你也可以显式地指定入口文件,例如:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">vue serve Test.vue</span><br></pre></td></tr></table></figure>

<p>快速原型开发也是支持热更新及<code>ES6</code>的</p>
<p>另外可以通过</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">vue build Test.vue</span><br></pre></td></tr></table></figure>

<p>将<code>.vue</code>文件进行打包，同样的也会在目录下创建一个<code>/dist</code>存放打包后的文件</p>
<h1 id="正式创建项目"><a href="#正式创建项目" class="headerlink" title="正式创建项目"></a>正式创建项目</h1><p><code>@vue/cli</code>创建项目的指令为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">vue create dirName</span><br></pre></td></tr></table></figure>

<p>创建后需要进行选择模板，<code>default</code>(默认配置)和<code>Manually select features</code>(手动配置)</p>
<p><code>default</code>的话只有<code>babel</code>和<code>eslint</code></p>
<p>所以一般建议使用<code>Manually select features</code>,支持<code>class</code>风格写法的<code>TypeScript</code>(使用了<a href="https://github.com/kaorun343/vue-property-decorator" target="_blank" rel="noopener">vue-property-decorator</a>)</p>
<p>同时也支持单元测试及<code>css</code>预处理以及<code>eslint</code>等</p>
<p>做好模板选择之后等待安装完成即可</p>
<h1 id="插件和Preset"><a href="#插件和Preset" class="headerlink" title="插件和Preset"></a>插件和Preset</h1><h2 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h2><p>Vue Cli使用了一套基于插件的架构，其依赖都是以 <code>@vue/cli-plugin-</code> 开头的，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&quot;devDependencies&quot;: &#123;</span><br><span class="line"></span><br><span class="line">    &quot;@vue/cli-plugin-babel&quot;: &quot;^4.0.0&quot;,</span><br><span class="line"></span><br><span class="line">    &quot;@vue/cli-plugin-eslint&quot;: &quot;^4.0.0&quot;,</span><br><span class="line"></span><br><span class="line">    &quot;@vue/cli-plugin-router&quot;: &quot;^4.0.0&quot;,</span><br><span class="line"></span><br><span class="line">    &quot;@vue/cli-plugin-typescript&quot;: &quot;^4.0.0&quot;,</span><br><span class="line"></span><br><span class="line">    &quot;@vue/cli-plugin-vuex&quot;: &quot;^4.0.0&quot;,</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>而插件可以修改<code>webpack</code>的内部配置，也可以向<code>vue-cli-service</code>注入命令,在项目创建的过程中，绝大部分列出的特性都是通过插件来实现的。</p>
<blockquote>
<p>Vue Cli的有官方的<a href="https://cli.vuejs.org/zh/dev-guide/plugin-dev.html" target="_blank" rel="noopener">插件开发指南</a></p>
</blockquote>
<p>而我们通过<code>vue create</code>之后创建好的项目，还如果想要添加新的插件的话，可以使用<code>vue add</code></p>
<p>例如我们之前创建的项目里面没有单元测试的插件，我们这时就可以直接调用:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">vue add unit-mocha</span><br></pre></td></tr></table></figure>

<p>这条指令就会被解析成去安装<code>@vue/cli-plugin-unit-mocha</code></p>
<blockquote>
<p>但是要注意的是，<code>vue add</code>只是为了安装和调用插件的，并不能用于普通的npm包</p>
</blockquote>
<p>另外如果出于一些原因你的插件列在了该项目之外的其它<code>package.json</code> 文件里，</p>
<p>你可以在自己项目的<code>package.json</code>里设置 <code>vuePlugins.resolveFrom</code> 选项指向包含其它 <code>package.json</code> 的文件夹。</p>
<p>例如，如果你有一个 .config/package.json 文件：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">  <span class="attr">"vuePlugins"</span>: &#123;</span><br><span class="line"></span><br><span class="line">    <span class="attr">"resolveFrom"</span>: <span class="string">".config"</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Preset"><a href="#Preset" class="headerlink" title="Preset"></a>Preset</h2><p>一个Preset是一个包含创建新项目所需预定义选项和插件的<code>JSON</code>对象，让用户无需在命令提示中选择它们。</p>
<p>当我们使用<code>vue create</code>创建好一个项目之后，就会生成一个Preset，其路径在<code>~/.vuerc</code>下，windows对应的路径应该是<code>C:\Users\.vuerc</code>下</p>
<p>示例:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">  <span class="attr">"useConfigFiles"</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">  <span class="attr">"cssPreprocessor"</span>: <span class="string">"sass"</span>,</span><br><span class="line"></span><br><span class="line">  <span class="attr">"plugins"</span>: &#123;</span><br><span class="line"></span><br><span class="line">    <span class="attr">"@vue/cli-plugin-babel"</span>: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">"@vue/cli-plugin-eslint"</span>: &#123;</span><br><span class="line"></span><br><span class="line">      <span class="attr">"config"</span>: <span class="string">"airbnb"</span>,</span><br><span class="line"></span><br><span class="line">      <span class="attr">"lintOn"</span>: [<span class="string">"save"</span>, <span class="string">"commit"</span>]</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">"@vue/cli-plugin-router"</span>: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">"@vue/cli-plugin-vuex"</span>: &#123;&#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Preset 的数据会被插件生成器用来生成相应的项目文件。除了上述这些字段，你也可以为集成工具添加配置:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">  &quot;useConfigFiles&quot;: true,</span><br><span class="line"></span><br><span class="line">  &quot;plugins&quot;: &#123;...&#125;,</span><br><span class="line"></span><br><span class="line">  &quot;configs&quot;: &#123;</span><br><span class="line"></span><br><span class="line">    &quot;vue&quot;: &#123;...&#125;,</span><br><span class="line"></span><br><span class="line">    &quot;postcss&quot;: &#123;...&#125;,</span><br><span class="line"></span><br><span class="line">    &quot;eslintConfig&quot;: &#123;...&#125;,</span><br><span class="line"></span><br><span class="line">    &quot;jest&quot;: &#123;...&#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这些额外的配置将会根据 <code>useConfigFiles</code> 的值被合并到 <code>package.json</code> 或相应的配置文件中。</p>
<p>例如，当 <code>&quot;useConfigFiles&quot;: true</code> 的时候，<code>configs</code>的值将会被合并到 <code>vue.config.js</code> 中。</p>
<p>另外还可以在Preset中指定插件的版本：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">  &quot;plugins&quot;: &#123;</span><br><span class="line"></span><br><span class="line">    &quot;@vue/cli-plugin-eslint&quot;: &#123;</span><br><span class="line"></span><br><span class="line">      &quot;version&quot;: &quot;^3.0.0&quot;</span><br><span class="line"></span><br><span class="line">      // ... 该插件的其它选项</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="CLI服务"><a href="#CLI服务" class="headerlink" title="CLI服务"></a>CLI服务</h1><p>介绍完插件和Preset之后，我们来看我们创建好的项目：</p>
<h2 id="使用命令"><a href="#使用命令" class="headerlink" title="使用命令"></a>使用命令</h2><p>我们在<code>package.json</code>中有这么一个依赖<code>@vue/cli-service</code>,使得我们可以使用一个<code>vue-cli-service</code>的命令来进行启动项目等指令。</p>
<p>默认的<code>package.json</code>为:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line"></span><br><span class="line">    <span class="attr">"serve"</span>: <span class="string">"vue-cli-service serve"</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">"build"</span>: <span class="string">"vue-cli-service build"</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="vue-cli-service-serve"><a href="#vue-cli-service-serve" class="headerlink" title="vue-cli-service serve"></a>vue-cli-service serve</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">用法：vue-cli-service serve [options] [entry]</span><br><span class="line"></span><br><span class="line">选项：</span><br><span class="line"></span><br><span class="line">  --open    在服务器启动时打开浏览器</span><br><span class="line"></span><br><span class="line">  --copy    在服务器启动时将 URL 复制到剪切版</span><br><span class="line"></span><br><span class="line">  --mode    指定环境模式 (默认值：development)</span><br><span class="line"></span><br><span class="line">  --host    指定 host (默认值：0.0.0.0)</span><br><span class="line"></span><br><span class="line">  --port    指定 port (默认值：8080)</span><br><span class="line"></span><br><span class="line">  --https   使用 https (默认值：false)</span><br></pre></td></tr></table></figure>

<p><code>vue-cli-service serve</code>命令会启动一个开发服务器 (基于<code>webpack-dev-server</code>) 并附带开箱即用的模块热重载 (<code>Hot-Module-Replacement</code>)。</p>
<p>除了通过命令行参数，你也可以使用<code>vue.config.js</code>里的<code>devServer</code>字段配置开发服务器。</p>
<p>命令行参数<code>[entry]</code>将被指定为唯一入口，而非额外的追加入口。尝试使用<code>[entry]</code>覆盖<code>config.pages</code>中的<code>entry</code>将可能引发错误。</p>
<h3 id="vue-cli-service-build"><a href="#vue-cli-service-build" class="headerlink" title="vue-cli-service build"></a>vue-cli-service build</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">用法：vue-cli-service build [options] [entry|pattern]</span><br><span class="line"></span><br><span class="line">选项：</span><br><span class="line"></span><br><span class="line">  --mode        指定环境模式 (默认值：production)</span><br><span class="line"></span><br><span class="line">  --dest        指定输出目录 (默认值：dist)</span><br><span class="line"></span><br><span class="line">  --modern      面向现代浏览器带自动回退地构建应用</span><br><span class="line"></span><br><span class="line">  --target      app | lib | wc | wc-async (默认值：app)</span><br><span class="line"></span><br><span class="line">  --name        库或 Web Components 模式下的名字 (默认值：package.json 中的 &quot;name&quot; 字段或入口文件名)</span><br><span class="line"></span><br><span class="line">  --no-clean    在构建项目之前不清除目标目录</span><br><span class="line"></span><br><span class="line">  --report      生成 report.html 以帮助分析包内容</span><br><span class="line"></span><br><span class="line">  --report-json 生成 report.json 以帮助分析包内容</span><br><span class="line"></span><br><span class="line">  --watch       监听文件变化</span><br></pre></td></tr></table></figure>

<p><code>vue-cli-service build</code> 会在<code>dist/</code>目录产生一个可用于生产环境的包，带有<code>JS/CSS/HTML</code>的压缩，和为更好的缓存而做的自动的 <code>vendor chunk splitting</code>。它的<code>chunk manifest</code>会内联在<code>HTML</code>里。</p>
<p>这里还有一些有用的命令参数：</p>
<p><code>--modern</code>使用现代模式构建应用，为现代浏览器交付原生支持的<code>ES2015</code>代码，并生成一个兼容老浏览器的包用来自动回退。</p>
<p><code>--target</code>允许你将项目中的任何组件以一个库或<code>Web Components</code>组件的方式进行构建。更多细节请查阅构建目标。</p>
<p><code>--report</code>和<code>--report-json</code>会根据构建统计生成报告，它会帮助你分析包中包含的模块们的大小。</p>
<h3 id="vue-cli-service-inspect"><a href="#vue-cli-service-inspect" class="headerlink" title="vue-cli-service inspect"></a>vue-cli-service inspect</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">用法：vue-cli-service inspect [options] [...paths]</span><br><span class="line"></span><br><span class="line">选项：</span><br><span class="line"></span><br><span class="line">  --mode    指定环境模式 (默认值：development)</span><br></pre></td></tr></table></figure>

<p>可以使用<code>vue-cli-service inspect</code>来审查一个 <code>Vue CLI</code>项目的<code>webpack config</code></p>
<h1 id="开发"><a href="#开发" class="headerlink" title="开发"></a>开发</h1><h2 id="HTML和静态资源"><a href="#HTML和静态资源" class="headerlink" title="HTML和静态资源"></a>HTML和静态资源</h2><p><code>public</code>下的<code>index.html</code>文件应用了<code>html-webpack-plugin</code>从而作为模板，构建过程中会自动注入很多资源链接。</p>
<p>且会注入很多资源暗示（resource hint）比如<code>preload</code> <code>prefetch</code>等，还有用到的<code>CSS</code>和<code>JS</code>资源</p>
<h3 id="html模板插值"><a href="#html模板插值" class="headerlink" title="html模板插值"></a>html模板插值</h3><p>并且<code>html</code>可以用作模板进行插值：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">`&lt;%= VALUE %&gt;` 用来做不转义插值；</span><br><span class="line"></span><br><span class="line">`&lt;%- VALUE %&gt;` 用来做 HTML 转义插值；</span><br><span class="line"></span><br><span class="line">`&lt;% expression %&gt;` 用来描述 JavaScript 流程控制。</span><br></pre></td></tr></table></figure>

<h3 id="使用CLI构建多页面应用"><a href="#使用CLI构建多页面应用" class="headerlink" title="使用CLI构建多页面应用"></a>使用CLI构建多页面应用</h3><p>CLI3.0+ 使得我们可以非常方便的进行构建多页面应用，只需要在<code>vue.config.js</code>中配置<code>Pages</code>就行，例如:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line"></span><br><span class="line">    pages: &#123;</span><br><span class="line"></span><br><span class="line">        index: &#123;</span><br><span class="line">            <span class="comment">// page 的入口</span></span><br><span class="line"></span><br><span class="line">            entry: <span class="string">'src/main.ts'</span>,</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 模板来源</span></span><br><span class="line"></span><br><span class="line">            template: <span class="string">'public/index.html'</span>,</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 在 dist/index.html 的输出</span></span><br><span class="line"></span><br><span class="line">            filename: <span class="string">'index.html'</span>,</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 当使用 title 选项时，</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// template 中的 title 标签需要是 &lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;&lt;/title&gt;</span></span><br><span class="line"></span><br><span class="line">            title: <span class="string">'Index Page'</span>,</span><br><span class="line"></span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 当使用只有入口的字符串格式时，</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 模板会被推导为 `public/subpage.html`</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 并且如果找不到的话，就回退到 `public/index.html`。</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 输出文件名会被推导为 `subpage.html`。</span></span><br><span class="line"></span><br><span class="line">        subpage: <span class="string">'src/subpage/main.ts'</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>整体的项目结构为:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">--src</span><br><span class="line"></span><br><span class="line">    --subpage</span><br><span class="line"></span><br><span class="line">        --main.ts</span><br><span class="line"></span><br><span class="line">    main.ts</span><br></pre></td></tr></table></figure>

<p>即可完成多页面配置，就可以访问<code>http://localhost:8080/subpage.html/#/</code>了</p>
<h3 id="处理静态资源"><a href="#处理静态资源" class="headerlink" title="处理静态资源"></a>处理静态资源</h3><p>静态资源的处理方式分为2种：</p>
<ol>
<li><p>放置在<code>public</code>目录下/通过<strong>绝对路径</strong>引用，  这种情况资源直接拷贝，不进行<code>webpack</code>处理</p>
</li>
<li><p>在<code>JS/TS</code>中被导入/在<code>template</code>或者<code>CSS</code>中被<strong>相对路径</strong>引用的， 这类资源会被<code>webpack</code>处理</p>
</li>
</ol>
<h4 id="从相对路径导入"><a href="#从相对路径导入" class="headerlink" title="从相对路径导入"></a>从相对路径导入</h4><p>对于所有的相对路径引入，其资源 URL 都会被解析为一个模块依赖</p>
<p>例如，<code>url(./image.png)</code> 会被翻译为 <code>require(&#39;./image.png&#39;)</code>,会被编译为：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">h(<span class="string">'img'</span>, &#123; <span class="attr">attrs</span>: &#123; <span class="attr">src</span>: <span class="built_in">require</span>(<span class="string">'./image.png'</span>) &#125;&#125;)</span><br></pre></td></tr></table></figure>

<p>然后会通过<code>file-loader</code>来计算出最终的文件路径，如果资源小于<code>4kb</code>，还会使用<code>url-loader</code>将其内联进来，避免多发http请求。</p>
<h4 id="public文件夹"><a href="#public文件夹" class="headerlink" title="public文件夹"></a>public文件夹</h4><p>任何放置在<code>public</code>文件夹的静态资源都会被简单的复制，而不经过<code>webpack</code>。需要通过绝对路径来引用它们。</p>
<p>但是一般情况不建议把资源放到<code>public</code>文件夹下，因为经过<code>webpack</code>处理的资源会存在如下几个方面的优点：</p>
<ol>
<li><p>经过打包的<code>JS</code>和<code>css</code>会在一起，而不是分开的，可以节约http请求</p>
</li>
<li><p>如果出现错误，打包的时候就能发现，而不是放到服务上时才发现资源缺失或者报错</p>
</li>
<li><p>打包出的文件包含哈希值，可以排除缓存问题</p>
</li>
</ol>
<p>关于<code>public</code>文件夹，如果前端应用没有部署在域名的根部的话，就得进行配置<a href="https://cli.vuejs.org/zh/config/#publicpath" target="_blank" rel="noopener">publicPath</a>配置</p>
<h2 id="webpack配置"><a href="#webpack配置" class="headerlink" title="webpack配置"></a>webpack配置</h2><h3 id="修改webpack配置"><a href="#修改webpack配置" class="headerlink" title="修改webpack配置"></a>修改webpack配置</h3><p><code>Vue CLI3.0</code>中配置<code>webpack</code>的方式都是通过<code>vue.config.js</code>。<br>简单来说分为2种方式：</p>
<ol>
<li><p>通过<code>vue.config.js</code>中的<code>configureWebpack</code>属性</p>
</li>
<li><p>通过<code>webpack-chain</code>进行链式操作</p>
</li>
</ol>
<h4 id="vue-config-js中的configureWebpack"><a href="#vue-config-js中的configureWebpack" class="headerlink" title="vue.config.js中的configureWebpack"></a><code>vue.config.js</code>中的<code>configureWebpack</code></h4><p>这个<code>configureWebpack</code>可以是一个对象也可以是一个返回对象的函数，这边有官方的2个例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// vue.config.js</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line"></span><br><span class="line">  configureWebpack: &#123;</span><br><span class="line"></span><br><span class="line">    plugins: [</span><br><span class="line"></span><br><span class="line">      <span class="keyword">new</span> MyAwesomeWebpackPlugin()</span><br><span class="line"></span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// vue.config.js</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line"></span><br><span class="line">  configureWebpack: <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">'production'</span>) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 为生产环境修改配置...</span></span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 为开发环境修改配置...</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以看到，通过这个选项可以进行配置的修改，具体详细的配置项可以参见<a href="https://cli.vuejs.org/zh/config/#publicpath" target="_blank" rel="noopener">官方配置参考</a></p>
<h4 id="通过webpack-chain进行链式操作"><a href="#通过webpack-chain进行链式操作" class="headerlink" title="通过webpack-chain进行链式操作"></a>通过<code>webpack-chain</code>进行链式操作</h4><p>比如说想进行修改<code>loader</code>选项:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// vue.config.js</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line"></span><br><span class="line">  chainWebpack: <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">    config.module</span><br><span class="line"></span><br><span class="line">      .rule(<span class="string">'vue'</span>)</span><br><span class="line"></span><br><span class="line">      .use(<span class="string">'vue-loader'</span>)</span><br><span class="line"></span><br><span class="line">        .loader(<span class="string">'vue-loader'</span>)</span><br><span class="line"></span><br><span class="line">        .tap(<span class="function"><span class="params">options</span> =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">          <span class="comment">// 修改它的选项...</span></span><br><span class="line"></span><br><span class="line">          <span class="keyword">return</span> options</span><br><span class="line"></span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>具体的例子可以参见<a href="https://github.com/neutrinojs/webpack-chain#getting-started" target="_blank" rel="noopener">webpack-chain的文档</a></p>
<h3 id="审查项目的-webpack-配置"><a href="#审查项目的-webpack-配置" class="headerlink" title="审查项目的 webpack 配置"></a>审查项目的 webpack 配置</h3><p>因为<code>Vue CLI</code>对<code>webpack</code>配置做了抽象，所以想进行调整的时候通常会需要看到目前的<code>webpack</code>配置.</p>
<p>在前文中提到过，通过<code>vue-cli-service inspect</code>指令可以进行查看配置</p>
<p>所以也可以直接将<code>stdout</code>重定向到文件中方便进行查看</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">vue-cli-service inspect &gt; webpackConfig.txt</span><br></pre></td></tr></table></figure>

<h2 id="环境变量和模式"><a href="#环境变量和模式" class="headerlink" title="环境变量和模式"></a>环境变量和模式</h2><h3 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h3><p>可以在项目根目录创建如下文件进行环境变量的配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">.env                # 在所有的环境中被载入</span><br><span class="line"></span><br><span class="line">.env.local          # 在所有的环境中被载入，但会被 git 忽略</span><br><span class="line"></span><br><span class="line">.env.[mode]         # 只在指定的模式中被载入</span><br><span class="line"></span><br><span class="line">.env.[mode].local   # 只在指定的模式中被载入，但会被 git 忽略</span><br></pre></td></tr></table></figure>

<p>比如创建一个<code>.env</code>文件，内部为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">VUE_APP_FOO=Bar</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意，键的开头必须为<code>VUE_APP</code>才可以在组件内部使用</p>
</blockquote>
<p>被载入的变量将会对 vue-cli-service 的所有命令、插件和依赖可用，也可以在组件内部进行使用：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;Component, Vue&#125; <span class="keyword">from</span> <span class="string">"vue-property-decorator"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> SubPageApp <span class="keyword">extends</span> Vue &#123;</span><br><span class="line"></span><br><span class="line">    envVal: <span class="built_in">string</span> = process.env.VUE_APP_FOO</span><br><span class="line"></span><br><span class="line">    mounted() &#123;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">console</span>.log(process.env.VUE_APP_FOO);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="模式"><a href="#模式" class="headerlink" title="模式"></a>模式</h3><p>模式是 <code>Vue CLI</code> 项目中一个重要的概念。默认情况下，一个 <code>Vue CLI</code> `项目有三个模式：</p>
<ul>
<li><p><code>development</code> 模式用于<code>vue-cli-service serve</code></p>
</li>
<li><p><code>production</code> 模式用于<code>vue-cli-service build</code> 和 <code>vue-cli-service test:e2e</code></p>
</li>
<li><p><code>test</code>模式用于<code>vue-cli-service test:unit</code></p>
</li>
</ul>
<p>另外除了<code>VUE_APP_*</code>变量之外，在你的应用代码中始终可用的还有两个特殊的变量：</p>
<ul>
<li><p><code>NODE_ENV</code> - 会是 <code>&quot;development&quot;</code>、<code>&quot;production&quot;</code> 或 <code>&quot;test&quot;</code> 中的一个。具体的值取决于应用运行的模式。</p>
</li>
<li><p><code>BASE_URL</code> - 会和 <code>vue.config.js</code> 中的 <code>publicPath</code>选项相符，即你的应用会部署到的基础路径。</p>
</li>
</ul>
<p>所有解析出来的环境变量都可以在<code>public/index.html</code> 中以<code>HTML</code>插值中介绍的方式使用。</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">DeeJay</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://deejay0921.github.io/2019/11/11/VueCli3.0简介/">https://deejay0921.github.io/2019/11/11/VueCli3.0简介/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://deejay0921.github.io">DeeJay's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/前端/">前端    </a><a class="post-meta__tags" href="/tags/Vue/">Vue    </a></div><div class="post_share"><div class="social-share" data-image="https://pizzamanz.net/wp-content/uploads/2018/08/Vue_cli_3.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button"><i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/wechat.jpg"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/alipay.jpg"><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2019/11/15/Vue2.x+TypeScript开发指南/"><img class="prev_cover lazyload" data-src="https://ordina-jworks.github.io/img/vue-with-typescript/vue-plus-typescript.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>Vue2.x+TypeScript开发指南</span></div></a></div><div class="next-post pull_right"><a href="/2019/11/08/TypeScript 中的模块系统/"><img class="next_cover lazyload" data-src="https://devblogs.microsoft.com/typescript/wp-content/uploads/sites/11/2018/08/typescriptfeature.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>TypeScript 中的模块系统</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2017/10/13/Vue中的v-model理解/" title="Vue中的v-model理解"><img class="relatedPosts_cover lazyload" data-src="https://vuejs.org/images/logo.png"><div class="relatedPosts_title">Vue中的v-model理解</div></a></div><div class="relatedPosts_item"><a href="/2019/11/15/Vue2.x+TypeScript开发指南/" title="Vue2.x+TypeScript开发指南"><img class="relatedPosts_cover lazyload" data-src="https://ordina-jworks.github.io/img/vue-with-typescript/vue-plus-typescript.png"><div class="relatedPosts_title">Vue2.x+TypeScript开发指南</div></a></div><div class="relatedPosts_item"><a href="/2019/11/19/Vue后端渲染之Nuxt.js/" title="Vue后端渲染之Nuxt.js"><img class="relatedPosts_cover lazyload" data-src="https://moriohcdn.b-cdn.net/521f533697.png"><div class="relatedPosts_title">Vue后端渲染之Nuxt.js</div></a></div><div class="relatedPosts_item"><a href="/2019/11/07/TypeScript中的声明文件/" title="TypeScript中的声明文件"><img class="relatedPosts_cover lazyload" data-src="https://devblogs.microsoft.com/typescript/wp-content/uploads/sites/11/2018/08/typescriptfeature.png"><div class="relatedPosts_title">TypeScript中的声明文件</div></a></div><div class="relatedPosts_item"><a href="/2017/08/01/CSS居中/" title="CSS居中"><img class="relatedPosts_cover lazyload" data-src="https://content.linkedin.com/content/dam/me/learning/blog/2016/september/CSS.jpg"><div class="relatedPosts_title">CSS居中</div></a></div><div class="relatedPosts_item"><a href="/2017/07/30/CSS基础/" title="CSS基础"><img class="relatedPosts_cover lazyload" data-src="https://content.linkedin.com/content/dam/me/learning/blog/2016/september/CSS.jpg"><div class="relatedPosts_title">CSS基础</div></a></div></div><div class="clear_both"></div></div></div></div><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2019 By DeeJay</div><div class="framework-info"><span>驱动 </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="/js/tw_cn.js"></script><script>translateInitilization()
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async></script></body></html>